{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vShow as _vShow, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"formSection\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"please\"\n}, [/*#__PURE__*/_createElementVNode(\"h2\", null, \" Vous pouvez mettre à jour les données de votre compte \")], -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = {\n  class: \"formDiv\"\n};\nconst _hoisted_5 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"UserName\",\n  class: \"label\"\n}, [/*#__PURE__*/_createTextVNode(\"Nom \"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"asterisque\"\n}, \"*\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"UserFirstname\",\n  class: \"label\"\n}, [/*#__PURE__*/_createTextVNode(\"Prénom \"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"asterisque\"\n}, \"*\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_9 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"UserEmail\",\n  class: \"label\"\n}, [/*#__PURE__*/_createTextVNode(\"Email \"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"asterisque\"\n}, \"*\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_11 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"UserPresentation\",\n  class: \"label\"\n}, \"Présentation\", -1\n/* HOISTED */\n);\n\nconst _hoisted_13 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"UserDepartement\",\n  class: \"label\"\n}, [/*#__PURE__*/_createTextVNode(\"Service \"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"asterisque\"\n}, \"*\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_15 = /*#__PURE__*/_createStaticVNode(\"<option value=\\\"...\\\">...</option><option value=\\\"communication\\\">communication</option><option value=\\\"administration\\\">administration</option><option value=\\\"siège\\\">siège</option><option value=\\\"R&amp;D\\\">R&amp;D</option><option value=\\\"magasin 1\\\">magasin 1</option><option value=\\\"magasin 2\\\">magasin 2</option><option value=\\\"etc.\\\">etc.</option>\", 8);\n\nconst _hoisted_23 = [_hoisted_15];\nconst _hoisted_24 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_25 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"UserRole\",\n  class: \"label\"\n}, \"Rôle\", -1\n/* HOISTED */\n);\n\nconst _hoisted_26 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_27 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"UserPassword\",\n  class: \"label\"\n}, [/*#__PURE__*/_createTextVNode(\"Mot de passe \"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"asterisque\"\n}, \"*\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_28 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"formLine formLineTop\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"label\"\n}), /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"hint input\"\n}, [/*#__PURE__*/_createTextVNode(\" Vous pouvez changer de mot de passe.\"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createTextVNode(\" Le mot de passe doit contenir au minimum 8 caractères, dont une majuscule, une minuscule, un chiffre et un caractère spécial.\")])], -1\n/* HOISTED */\n);\n\nconst _hoisted_29 = {\n  key: 0,\n  class: \"formLine\"\n};\n\nconst _hoisted_30 = /*#__PURE__*/_createStaticVNode(\"<label for=\\\"UserHabilitation\\\" class=\\\"label\\\">Habilitation</label><div class=\\\"input\\\"><select id=\\\"UserHabilitation\\\" name=\\\"UserHabilitation\\\" required=\\\"required\\\"><option value=\\\"1\\\">avec habilitation à administrer</option><option value=\\\"0\\\">sans habilitation à administrer</option></select></div>\", 2);\n\nconst _hoisted_32 = [_hoisted_30];\n\nconst _hoisted_33 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"asterisque\",\n  style: {\n    \"text-align\": \"right\"\n  }\n}, \" * Champs requis \", -1\n/* HOISTED */\n);\n\nconst _hoisted_34 = {\n  class: \"btn-div\"\n};\n\nconst _hoisted_35 = /*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"submit\",\n  class: \"btn\",\n  id: \"UserSignupBtn\",\n  value: \"Mettre à jour\",\n  disabled: \"\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_36 = {\n  class: \"add-div\"\n};\nconst _hoisted_37 = {\n  id: \"erreur\"\n};\nconst _hoisted_38 = {\n  class: \"add-div\"\n};\nconst _hoisted_39 = {\n  id: \"erreur\"\n};\nconst _hoisted_40 = {\n  id: \"no-account\",\n  class: \"add-div\"\n};\n\nconst _hoisted_41 = /*#__PURE__*/_createElementVNode(\"p\", null, \" Vous pouvez si vous le souhaitez, effacer votre compte ainsi que tous les partages et commentaires qui y sont liés\", -1\n/* HOISTED */\n);\n\nconst _hoisted_42 = {\n  class: \"btn-div\"\n};\n\nconst _hoisted_43 = /*#__PURE__*/_createTextVNode(\"Effacer\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  return _openBlock(), _createElementBlock(\"section\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"form\", {\n    class: \"formulaire\",\n    method: \"PUT\",\n    name: \"form\",\n    id: \"form\",\n    onSubmit: _cache[12] || (_cache[12] = (...args) => $options.modifySignup && $options.modifySignup(...args))\n  }, [_createCommentVNode(\"Le Nom\"), _createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    class: \"input\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.UserName = $event),\n    onInput: _cache[1] || (_cache[1] = (...args) => $options.checkForm && $options.checkForm(...args)),\n    type: \"text\",\n    placeholder: \"Entrez votre nom.\",\n    id: \"UserName\",\n    name: \"UserName\",\n    required: \"required\"\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), [[_vModelText, $data.UserName]])]), _createCommentVNode(\"Le Prénom\"), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _withDirectives(_createElementVNode(\"input\", {\n    class: \"input\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.UserFirstname = $event),\n    onInput: _cache[3] || (_cache[3] = (...args) => $options.checkForm && $options.checkForm(...args)),\n    type: \"text\",\n    placeholder: \"Entrez votre prénom.\",\n    id: \"UserFirstname\",\n    name: \"UserFirstname\",\n    required: \"required\"\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), [[_vModelText, $data.UserFirstname]])]), _createCommentVNode(\"L'Email'\"), _createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _withDirectives(_createElementVNode(\"input\", {\n    class: \"input\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.UserEmail = $event),\n    onInput: _cache[5] || (_cache[5] = (...args) => $options.checkForm && $options.checkForm(...args)),\n    type: \"email\",\n    placeholder: \"Entrez une adresse mail valide.\",\n    id: \"UserEmail\",\n    name: \"UserEmail\",\n    required: \"\"\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), [[_vModelText, $data.UserEmail]])]), _createCommentVNode(\"La Présentation\"), _createElementVNode(\"div\", _hoisted_11, [_hoisted_12, _withDirectives(_createElementVNode(\"textarea\", {\n    class: \"smalltextarea input\",\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.UserPresentation = $event),\n    type: \"textarea\",\n    placeholder: \"Si vous le souhaitez, vous pouvez vous présenter...\",\n    id: \"UserPresentation\",\n    name: \"UserPresentation\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.UserPresentation]])]), _createCommentVNode(\"Le Service\"), _createElementVNode(\"div\", _hoisted_13, [_hoisted_14, _withDirectives(_createElementVNode(\"select\", {\n    class: \"input\",\n    id: \"UserDepartement\",\n    name: \"UserDepartement\",\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $data.UserDepartement = $event),\n    required: \"required\"\n  }, _hoisted_23, 512\n  /* NEED_PATCH */\n  ), [[_vModelSelect, $data.UserDepartement]])]), _createCommentVNode(\"Le Role\"), _createElementVNode(\"div\", _hoisted_24, [_hoisted_25, _withDirectives(_createElementVNode(\"textarea\", {\n    class: \"smalltextarea input\",\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $data.UserRole = $event),\n    type: \"textarea\",\n    placeholder: \"Quel est votre rôle dans l'entreprise ?\",\n    id: \"UserRole\",\n    name: \"UserRole\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.UserRole]])]), _createCommentVNode(\"Le Mot de passe \"), _createElementVNode(\"div\", _hoisted_26, [_hoisted_27, _withDirectives(_createElementVNode(\"input\", {\n    class: \"input\",\n    \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => $data.UserPassword = $event),\n    onInput: _cache[10] || (_cache[10] = (...args) => $options.checkForm && $options.checkForm(...args)),\n    type: \"password\",\n    id: \"UserPassword\",\n    name: \"UserPassword\",\n    maxlength: \"30\"\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), [[_vModelText, $data.UserPassword]])]), _hoisted_28, _createCommentVNode(\"L'habilitation \"), _ctx.isAdmin ? (_openBlock(), _createElementBlock(\"div\", _hoisted_29, _hoisted_32)) : _createCommentVNode(\"v-if\", true), _hoisted_33, _createElementVNode(\"div\", _hoisted_34, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn\",\n    onClick: _cache[11] || (_cache[11] = $event => $options.goBacKToForum()),\n    id: \"CancelBtn\"\n  }, \"Annuler\"), _hoisted_35])], 32\n  /* HYDRATE_EVENTS */\n  ), _createCommentVNode(\" A FAIRE : implementer des components modaux \"), _withDirectives(_createElementVNode(\"div\", _hoisted_36, [_createElementVNode(\"p\", _hoisted_37, \" Tout va bien : \" + _toDisplayString($data.message), 1\n  /* TEXT */\n  )], 512\n  /* NEED_PATCH */\n  ), [[_vShow, $data.success === true]]), _withDirectives(_createElementVNode(\"div\", _hoisted_38, [_createElementVNode(\"p\", _hoisted_39, \" Echec de la mise à jour : \" + _toDisplayString($data.message), 1\n  /* TEXT */\n  )], 512\n  /* NEED_PATCH */\n  ), [[_vShow, $data.success === false]]), _createElementVNode(\"div\", _hoisted_40, [_hoisted_41, _createElementVNode(\"div\", _hoisted_42, [_createVNode(_component_router_link, {\n    onClick: _cache[13] || (_cache[13] = $event => $options.deleteAccount()),\n    class: \"btn\",\n    to: \"../deconnect\"\n  }, {\n    default: _withCtx(() => [_hoisted_43]),\n    _: 1\n    /* STABLE */\n\n  })])])])])]);\n}","map":{"version":3,"mappings":";;AACaA,OAAK,EAAG;;;AACVA,OAAK,EAAG;;;gCAETC,oBAEM,KAFN,EAEM;AAFDD,OAAK,EAAC;AAEL,CAFN,EAAmB,cACjBC,oBAAgE,IAAhE,EAAgE,IAAhE,EAAI,yDAAJ,CADiB,CAAnB;;AAAA;;;AAIKD,OAAK,EAAG;;;AASYA,OAAK,EAAC;;;gCACDC,oBAEqE,OAFrE,EAEqE;AAD3DC,KAAG,EAAC,UACuD;AAA3DF,OAAK,EAAC;AAAqD,CAFrE,iCAEwB,sBAAIC,oBAAiC,MAAjC,EAAiC;AAA3BD,OAAK,EAAC;AAAqB,CAAjC,EAAyB,GAAzB,EAF5B;;AAAA;;;AAcLA,OAAK,EAAC;;;gCACDC,oBAEwE,OAFxE,EAEwE;AAD9DC,KAAG,EAAC,eAC0D;AAA9DF,OAAK,EAAC;AAAwD,CAFxE,iCAEwB,yBAAOC,oBAAiC,MAAjC,EAAiC;AAA3BD,OAAK,EAAC;AAAqB,CAAjC,EAAyB,GAAzB,EAF/B;;AAAA;;;AAcJA,OAAK,EAAC;;;iCACFC,oBAEuE,OAFvE,EAEuE;AAD7DC,KAAG,EAAC,WACyD;AAA7DF,OAAK,EAAC;AAAuD,CAFvE,iCAEwB,wBAAMC,oBAAiC,MAAjC,EAAiC;AAA3BD,OAAK,EAAC;AAAqB,CAAjC,EAAyB,GAAzB,EAF9B;;AAAA;;;AAcLA,OAAK,EAAC;;;iCACDC,oBAE4C,OAF5C,EAE4C;AADlCC,KAAG,EAAC,kBAC8B;AAAlCF,OAAK,EAAC;AAA4B,CAF5C,EAEwB,cAFxB,EAEoC;AAAA;AAFpC;;;AAaLA,OAAK,EAAC;;;iCACDC,oBAEyE,OAFzE,EAEyE;AAD/DC,KAAG,EAAC,iBAC2D;AAA/DF,OAAK,EAAC;AAAyD,CAFzE,iCAEwB,0BAAQC,oBAAiC,MAAjC,EAAiC;AAA3BD,OAAK,EAAC;AAAqB,CAAjC,EAAyB,GAAzB,EAFhC;;AAAA;;;;qBASYG;;AAYjBH,OAAK,EAAC;;;iCACDC,oBAEoC,OAFpC,EAEoC;AADpCC,KAAG,EAAC,UACgC;AAA1BF,OAAK,EAAC;AAAoB,CAFpC,EAEwB,MAFxB,EAE4B;AAAA;AAF5B;;;AAYLA,OAAK,EAAC;;;iCACDC,oBAE8E,OAF9E,EAE8E;AADpEC,KAAG,EAAC,cACgE;AAApEF,OAAK,EAAC;AAA8D,CAF9E,iCAEwB,+BAAaC,oBAAiC,MAAjC,EAAiC;AAA3BD,OAAK,EAAC;AAAqB,CAAjC,EAAyB,GAAzB,EAFrC;;AAAA;;iCAWVC,oBAIM,KAJN,EAIM;AAJDD,OAAK,EAAC;AAIL,CAJN,EAAiC,cAC/BC,oBAAyB,KAAzB,EAAyB;AAApBD,OAAK,EAAC;AAAc,CAAzB,CAD+B,eAE/BC,oBACwJ,GADxJ,EACwJ;AADrJD,OAAK,EAAC;AAC+I,CADxJ,EAAqB,+BAAC,wCAAD,eAAsCC,oBAAK,IAAL,CAAtC,eAA2CA,oBAAK,IAAL,CAA3C,gCAAgD,iIAAhD,CAArB,CAF+B,CAAjC;;AAAA;;;;AAOKD,OAAK,EAAC;;;;;qBACDI;;iCAeVH,oBAAwE,KAAxE,EAAwE;AAAnED,OAAK,EAAC,YAA6D;AAAhDK,OAAwB,EAAxB;AAAA;AAAA;AAAgD,CAAxE,EAAiD,mBAAjD,EAAkE;AAAA;AAAlE;;;AAEKL,OAAK,EAAC;;;iCAEDC,oBAAoF,OAApF,EAAoF;AAA7EK,MAAI,EAAC,QAAwE;AAA9DN,OAAK,EAAC,KAAwD;AAAlDO,IAAE,EAAC,eAA+C;AAA/BC,OAAK,EAAC,eAAyB;AAATC,UAAQ,EAAR;AAAS,CAApF;;AAAA;;;AAOfT,OAAK,EAAC;;;AACNO,IAAE,EAAC;;;AAEHP,OAAK,EAAC;;;AACNO,IAAE,EAAC;;;AAGHA,IAAE,EAAC;AAAaP,OAAK,EAAC;;;iCACzBC,oBAA0H,GAA1H,EAA0H,IAA1H,EAAG,qHAAH,EAAsH;AAAA;AAAtH;;;AACKD,OAAK,EAAC;;;kDAA8E;;;;;uBArK3GU,oBA0KU,SA1KV,cA0KU,CAzKRT,oBAwKO,KAxKP,cAwKO,CAtKHU,UAsKG,EAlKHV,oBAiKM,KAjKN,cAiKM,CAhKIA,oBAgJO,MAhJP,EAgJO;AAhJGD,SAAK,EAAC,YAgJT;AA/IGY,UAAM,EAAC,KA+IV;AA9IGC,QAAI,EAAC,MA8IR;AA7IGN,MAAE,EAAC,MA6IN;AA3IIO,YAAM,2CAAIC,uDAAJ;AA2IV,GAhJP,GAOUC,+BACAf,oBAYM,KAZN,cAYM,CAXIgB,UAWJ,kBARIhB,oBAO8B,OAP9B,EAO8B;AAPpBD,SAAK,EAAC,OAOc;+DANXkB,iBAAQC,OAMG;AALnBC,WAAK,yCAAIL,iDAAJ,CAKc;AAJpBT,QAAI,EAAC,MAIe;AAHpBe,eAAW,EAAC,mBAGQ;AAFpBd,MAAE,EAAC,UAEiB;AADpBM,QAAI,EAAC,UACe;AAApBS,YAAQ,EAAC;AAAW,GAP9B;;AAAA,oBACmBJ,iBAOvB,CAZN,GAcAF,kCACAf,oBAYM,KAZN,cAYM,CAXIsB,UAWJ,kBARItB,oBAO8B,OAP9B,EAO8B;AAPpBD,SAAK,EAAC,OAOc;+DANXkB,sBAAaC,OAMF;AALnBC,WAAK,yCAAIL,iDAAJ,CAKc;AAJpBT,QAAI,EAAC,MAIe;AAHpBe,eAAW,EAAC,sBAGQ;AAFpBd,MAAE,EAAC,eAEiB;AADpBM,QAAI,EAAC,eACe;AAApBS,YAAQ,EAAC;AAAW,GAP9B;;AAAA,oBACmBJ,sBAOvB,CAZN,GAcAF,iCACCf,oBAYK,KAZL,cAYK,CAXIuB,WAWJ,kBARIvB,oBAOsB,OAPtB,EAOsB;AAPZD,SAAK,EAAC,OAOM;+DANHkB,kBAASC,OAMN;AALXC,WAAK,yCAAIL,iDAAJ,CAKM;AAJZT,QAAI,EAAC,OAIO;AAHZe,eAAW,EAAC,iCAGA;AAFZd,MAAE,EAAC,WAES;AADZM,QAAI,EAAC,WACO;AAAZS,YAAQ,EAAC;AAAG,GAPtB;;AAAA,oBACmBJ,kBAOvB,CAZL,GAcDF,wCACAf,oBAWM,KAXN,eAWM,CAVIwB,WAUJ,kBAPIxB,oBAMsB,UANtB,EAMsB;AANVD,SAAK,EAAC,qBAMI;+DALHkB,yBAAgBC,OAKb;AAJZb,QAAI,EAAC,UAIO;AAHZe,eAAW,EAAC,qDAGA;AAFZd,MAAE,EAAC,kBAES;AADZM,QAAI,EAAC;AACO,GANtB;;AAAA,oBACmBK,yBAMvB,CAXN,GAaAF,mCACAf,oBAmBM,KAnBN,eAmBM,CAlBIyB,WAkBJ,kBAdMzB,oBAaS,QAbT,EAaS;AAbDD,SAAK,EAAC,OAaL;AAZDO,MAAE,EAAC,iBAYF;AAXDM,QAAI,EAAC,iBAWJ;+DAVQK,wBAAeC,OAUvB;AATDG,YAAQ,EAAC;AASR,GAbT;;AAAA,sBAGiBJ,wBAWvB,CAnBN,GAqBAF,gCACAf,oBAUM,KAVN,eAUM,CATI0B,WASJ,kBANI1B,oBAKqC,UALrC,EAKqC;AALxBD,SAAK,EAAC,qBAKkB;+DAJlBkB,iBAAQC,OAIU;AAH3Bb,QAAI,EAAC,UAGsB;AAF3Be,eAAW,EAAC,yCAEe;AAD3Bd,MAAE,EAAC,UACwB;AAA3BM,QAAI,EAAC;AAAsB,GALrC;;AAAA,oBACmBK,iBAKvB,CAVN,GAYAF,yCACAf,oBAWM,KAXN,eAWM,CAVI2B,WAUJ,kBAPI3B,oBAMyB,OANzB,EAMyB;AANfD,SAAK,EAAC,OAMS;+DALNkB,qBAAYC,OAKN;AAJdC,WAAK,2CAAIL,iDAAJ,CAIS;AAHfT,QAAI,EAAC,UAGU;AAFfC,MAAE,EAAC,cAEY;AADfM,QAAI,EAAC,cACU;AAAfgB,aAAS,EAAC;AAAK,GANzB;;AAAA,oBACmBX,qBAMvB,CAXN,GAYAY,aAMAd,wCAC4Be,8BAA5BrB,oBAcM,KAdN,eAcMsB,WAdN,wCAgBAC,aAEAhC,oBAGM,KAHN,eAGM,CAFIA,oBAA0F,QAA1F,EAA0F;AAAlFK,QAAI,EAAC,QAA6E;AAApEN,SAAK,EAAC,KAA8D;AAAvDkC,WAAK,wCAAEnB,wBAAF,CAAkD;AAA/BR,MAAE,EAAC;AAA4B,GAA1F,EAA0E,SAA1E,CAEJ,EADI4B,WACJ,CAHN,EA3IV;;AAAA,GAgKJ,EAdInB,oEAcJ,kBAZIf,oBAEM,KAFN,eAEM,CADJA,oBAAgD,GAAhD,eAAgB,qBAAgBmC,iBAAElB,aAAF,CAAhC,EAAyC;AAAA;AAAzC,GACI,CAFN;;AAAA,eAA6BA,kBAAO,OAYxC,kBATIjB,oBAEM,KAFN,eAEM,CADJA,oBAA2D,GAA3D,eAAgB,gCAA2BmC,iBAAElB,aAAF,CAA3C,EAAoD;AAAA;AAApD,GACI,CAFN;;AAAA,eAA6BA,kBAAO,QASxC,EALIjB,oBAGM,KAHN,eAGM,CAFJoC,WAEI,EADJpC,oBAAqH,KAArH,eAAqH,CAAhGqC,aAAyFC,sBAAzF,EAAyF;AAA3EL,WAAK,wCAAEnB,wBAAF,CAAsE;AAAnDf,SAAK,EAAC,KAA6C;AAAvCwC,MAAE,EAAC;AAAoC,GAAzF;sBAAoE,MAAO;;;;GAA3E,CAAgG,CAArH,CACI,CAHN,CAKJ,CAjKN,CAkKG,CAxKP,CAyKQ,CA1KV","names":["class","_createElementVNode","for","_hoisted_15","_hoisted_30","style","type","id","value","disabled","_createElementBlock","_hoisted_3","method","name","onSubmit","$options","_createCommentVNode","_hoisted_6","$data","$event","onInput","placeholder","required","_hoisted_8","_hoisted_10","_hoisted_12","_hoisted_14","_hoisted_25","_hoisted_27","maxlength","_hoisted_28","_ctx","_hoisted_32","_hoisted_33","onClick","_hoisted_35","_toDisplayString","_hoisted_41","_createVNode","_component_router_link","to"],"sourceRoot":"","sources":["/Users/stefan/Library/Mobile Documents/com~apple~CloudDocs/08 WEB ET SITES/P7/frontend/src/components/UserModifyCompByAdmin.vue"],"sourcesContent":["<template>\n    <section class = \"container\">\n      <div class = \"formSection\">\n\n          <div class=\"please\" >\n            <h2> Vous pouvez mettre à jour les données de votre compte </h2>\n          </div>\n\n          <div class = \"formDiv\">\n                    <form     class=\"formulaire\"\n                              method=\"PUT\" \n                              name=\"form\" \n                              id=\"form\" \n\n                              @submit = \"modifySignup\">\n                             \n                              <!--Le Nom-->\n                              <div class=\"formLine\">\n                                        <label\n                                                  for=\"UserName\" \n                                                  class=\"label\">Nom <span class=\"asterisque\">*</span></label>\n                                        <input    class=\"input\"\n                                                  v-model=\"UserName\" \n                                                  @input = \"checkForm\"    \n                                                  type=\"text\" \n                                                  placeholder=\"Entrez votre nom.\" \n                                                  id=\"UserName\" \n                                                  name=\"UserName\" \n                                                  required=\"required\">\n                              </div>\n\n                              <!--Le Prénom-->\n                              <div class=\"formLine\">\n                                        <label \n                                                  for=\"UserFirstname\" \n                                                  class=\"label\">Prénom <span class=\"asterisque\">*</span></label>\n                                        <input    class=\"input\"\n                                                  v-model=\"UserFirstname\" \n                                                  @input = \"checkForm\"  \n                                                  type=\"text\" \n                                                  placeholder=\"Entrez votre prénom.\" \n                                                  id=\"UserFirstname\" \n                                                  name=\"UserFirstname\" \n                                                  required=\"required\">\n                              </div>\n\n                              <!--L'Email'-->\n                               <div class=\"formLine\">\n                                        <label    \n                                                  for=\"UserEmail\" \n                                                  class=\"label\">Email <span class=\"asterisque\">*</span></label>\n                                        <input    class=\"input\"\n                                                  v-model=\"UserEmail\" \n                                                  @input = \"checkForm\"    \n                                                  type=\"email\" \n                                                  placeholder=\"Entrez une adresse mail valide.\" \n                                                  id=\"UserEmail\"\n                                                  name=\"UserEmail\" \n                                                  required=\"\">\n                              </div>\n\n                              <!--La Présentation-->\n                              <div class=\"formLine\">\n                                        <label \n                                                  for=\"UserPresentation\" \n                                                  class=\"label\">Présentation</label>\n                                        <textarea   class=\"smalltextarea input\"\n                                                  v-model=\"UserPresentation\" \n                                                  type=\"textarea\"\n                                                  placeholder=\"Si vous le souhaitez, vous pouvez vous présenter...\" \n                                                  id=\"UserPresentation\" \n                                                  name=\"UserPresentation\" \n                                                  ></textarea>\n                              </div>\n\n                              <!--Le Service-->\n                              <div class=\"formLine\">\n                                        <label \n                                                  for=\"UserDepartement\" \n                                                  class=\"label\">Service <span class=\"asterisque\">*</span></label>\n\n                                          <select class=\"input\"\n                                                  id=\"UserDepartement\" \n                                                  name=\"UserDepartement\"\n                                                  v-model=\"UserDepartement\"  \n                                                  required=\"required\">\n                                                    <option value=\"...\">...</option>\n                                                    <option value=\"communication\">communication</option>\n                                                    <option value=\"administration\">administration</option>\n                                                    <option value=\"siège\">siège</option>\n                                                    <option value=\"R&amp;D\">R&amp;D</option>\n                                                    <option value=\"magasin 1\">magasin 1</option>\n                                                    <option value=\"magasin 2\">magasin 2</option>\n                                                    <option value=\"etc.\">etc.</option>\n                                          </select>\n                              </div>\n\n                              <!--Le Role-->\n                              <div class=\"formLine\">\n                                        <label    \n                                        for=\"UserRole\" \n                                                  class=\"label\">Rôle</label>\n                                        <textarea    class=\"smalltextarea input\"\n                                                  v-model=\"UserRole\" \n                                                  type=\"textarea\" \n                                                  placeholder=\"Quel est votre rôle dans l'entreprise ?\" \n                                                  id=\"UserRole\" \n                                                  name=\"UserRole\"></textarea>\n                              </div>\n\n                              <!--Le Mot de passe -->\n                              <div class=\"formLine\">\n                                        <label    \n                                                  for=\"UserPassword\" \n                                                  class=\"label\">Mot de passe <span class=\"asterisque\">*</span></label>\n                                        <input    class=\"input\"\n                                                  v-model=\"UserPassword\" \n                                                  @input = \"checkForm\"    \n                                                  type=\"password\" \n                                                  id=\"UserPassword\" \n                                                  name=\"UserPassword\" \n                                                  maxlength=\"30\">\n                              </div>\n                              <div class=\"formLine formLineTop\">\n                                <div class=\"label\"></div>\n                                <p class=\"hint input\"> Vous pouvez changer de mot de passe.<br/><br/>\n                                                       Le mot de passe doit contenir au minimum 8 caractères, dont une majuscule, une minuscule, un chiffre et un caractère spécial.</p>\n                              </div>\n\n                              <!--L'habilitation -->\n                              <div class=\"formLine\" v-if=\"isAdmin\">\n                                        <label    \n                                                  for=\"UserHabilitation\" \n                                                  class=\"label\">Habilitation</label>\n                                        <div     \n                                                  class=\"input\">\n                                                  <select     id=\"UserHabilitation\" \n                                                            name=\"UserHabilitation\" \n                                                            required=\"required\">\n                                                                      <option value=1>avec habilitation à administrer</option>\n                                                                      <option value=0>sans habilitation à administrer</option>                  \n                                                  </select>\n                                                           \n                                        </div>\n                              </div>\n\n                              <div class=\"asterisque\" style=\"text-align:right\"> * Champs requis </div>\n\n                              <div class=\"btn-div\">\n                                        <button type=\"button\" class=\"btn\" @click=\"goBacKToForum()\" id=\"CancelBtn\">Annuler</button>\n                                        <input type=\"submit\"  class=\"btn\" id=\"UserSignupBtn\" value=\"Mettre à jour\" disabled>           \n                              </div>\n       \n                    </form>\n\n                    <!-- A FAIRE : implementer des components modaux -->\n\n                    <div class=\"add-div\" v-show=\"success===true\">\n                      <p id=\"erreur\" > Tout va bien : {{message}} </p>\n                    </div>\n                    <div class=\"add-div\" v-show=\"success===false\">\n                      <p id=\"erreur\" > Echec de la mise à jour : {{message}} </p>\n                    </div>\n\n                    <div id=\"no-account\" class=\"add-div\">\n                      <p> Vous pouvez si vous le souhaitez, effacer votre compte ainsi que tous les partages et commentaires qui y sont liés</p>\n                      <div class=\"btn-div\"><router-link @click=\"deleteAccount()\" class=\"btn\" to=\"../deconnect\">Effacer</router-link> </div>\n                    </div>\n\n          </div>\n       </div>\n    </section>\n</template>\n\n<script>\nexport default {\n  name: 'UserModifyCompByAdmin',\n  \n  data() {\n    return {\n    UserName:\"\",\n    UserFirstname:\"\", \n    UserEmail:\"\", \n    UserPresentation:\"\",\n    UserDepartement:\"\", \n    UserRole:\"\", \n    UserPassword:\"\",\n    UserHabilitation:\"\",     \n    success:\"\",\n    message :\"\", //message d'erreur\n\n    AdminLength : {\n      type: Boolean,\n      default : false\n    }\n\n    }\n  },\n\n   beforeMount () {\n     this.UserHabilitation = sessionStorage.getItem(\"UserHabilitation\");\n    const  UserId = new URL(window.location.href).hash.split(\"/modifyByAdmin/\")[1];\n    const  Token = JSON.parse(sessionStorage.getItem(\"Token\"));\n\n          ///----- on vérifie d'abord qu'il y a au minimum deux administrateurs ----///\n          fetch(`http://localhost:3000/api/auth/safeAdmin`, {\n          method: 'GET',\n          headers: {\"Content-Type\": \"application/json\", \n                    \"Authorization\": \"Bearer \" + Token\n           },\n           mode : \"cors\"\n          })\n          .then((res) => {\n            return res.json();\n          })\n          .then((res) =>{\n            if (res.length > 2) {\n              this.AdminLength = true\n            } else {\n              this.AdminLength = false\n            }\n          })\n          .catch( (error) => { alert(error);\n          });\n\n\n          ///----on peut ensuite accèder au profil User------///\n          fetch(`http://localhost:3000/api/auth/${UserId}`, {\n          method: 'GET',\n          headers: {\"Content-Type\": \"application/json\", \n                    \"Authorization\": \"Bearer \" + Token\n           },\n           mode : \"cors\"\n          })\n          .then((res) => {\n            return res.json();\n          })\n          .then((res) =>{\n            this.UserName = res.UserName;\n            this.UserFirstname = res.UserFirstname;\n            this.UserEmail = res.UserEmail;\n            this.UserPresentation = res.UserPresentation;\n            this.UserDepartement = res.UserDepartement;\n            this.UserRole = res.UserRole;\n            this.UserPassword = res.UserPassword;\n            // this.UserHabilitation=res.UserHabilitation\n          })\n          .catch( (error) => { alert(error);\n          });\n        },\n\n  methods: {\n\n    checkForm() {\n\n      if (document.getElementById(\"UserName\").checkValidity() \n      && document.getElementById(\"UserFirstname\").checkValidity() \n      && document.getElementById(\"UserEmail\").checkValidity()\n      && document.getElementById(\"UserPassword\").checkValidity()\n      ) {\n        document.getElementById(\"UserSignupBtn\").disabled = false\n      }\n      else {document.getElementById(\"UserSignupBtn\").disabled = true;\n    }},\n    \n    goBacKToForum(){\n      this.$router.push({ name: 'wall' })\n    },\n\n    modifySignup(e) {\n\n      e.preventDefault();\n\n      const Token = JSON.parse(sessionStorage.getItem(\"Token\"));\n\n      const UserName = document.getElementById(\"UserName\").value\n      const UserFirstname = document.getElementById(\"UserFirstname\").value\n      const UserEmail = document.getElementById(\"UserEmail\").value\n      const UserPresentation = document.getElementById(\"UserPresentation\").value\n      const UserDepartement= document.getElementById(\"UserDepartement\").value\n      const UserRole = document.getElementById(\"UserRole\").value;\n      const UserPassword = document.getElementById(\"UserPassword\").value;\n      const UserHabilitation = document.getElementById(\"UserHabilitation\").value;\n\n      const User = { \"UserName\": UserName,\n                     \"UserFirstname\": UserFirstname,\n                     \"UserEmail\": UserEmail,\n                     \"UserDepartement\": UserDepartement,\n                     \"UserPresentation\": UserPresentation,\n                     \"UserRole\": UserRole,\n                      \"UserPassword\": UserPassword,\n                     \"UserHabilitation\" : UserHabilitation,\n      }\n\n      fetch(\"http://localhost:3000/api/auth/modifySignup\", {\n          method: 'PUT',\n          body: JSON.stringify(User),\n          headers: {\"Content-Type\": \"application/json\", \n                    \"Authorization\": \"Bearer \" + Token\n           },\n           mode : \"cors\"\n          })\n      .then((response) => {\n                    if (response.status == 201) { \n                              response.json()\n                              .then((res) => {\n\n                                console.log(res);\n                                    this.success= true;\n                                    this.message =  \"Mise à jour effectuée\"\n                                    sessionStorage.setItem(\"isAdmin\", JSON.stringify(response.UserHabilitation));\n                                    setTimeout(() => this.$router.push({ name: 'wall' }), 4000)\n                              })\n                    } else {\n                              response.json ()\n                              .then ((json) => {\n                              this.success= false;\n                              console.log(json);\n                              this.message = json.error;\n                              })\n                    }\n       })\n      .catch (() => {\n              this.success= false;\n              this.message = `Le serveur ne répond pas ! Veuillez réessayer ultérieurement`;\n      })         \n    },\n    \n    deleteAccount(){\n\n      const  UserId = JSON.parse(sessionStorage.getItem(\"UserId\"));\n      const  Token = JSON.parse(sessionStorage.getItem(\"Token\"));\n\n      fetch(`http://localhost:3000/api/auth/delete/${UserId}`, {\n          method: 'DELETE',\n          headers: {\"Content-Type\": \"application/json\", \n                    \"Authorization\": \"Bearer \" + Token\n           },\n          mode :\"cors\"\n      }).then(\n        sessionStorage.removeItem(\"UserId\"),\n        sessionStorage.removeItem(\"Token\"),\n        sessionStorage.removeItem(\"isAdmin\")\n      )\n    }\n  }\n}             \n  \n</script>\n\n<style lang=\"scss\" scoped>\n\n\n</style>"]},"metadata":{},"sourceType":"module"}