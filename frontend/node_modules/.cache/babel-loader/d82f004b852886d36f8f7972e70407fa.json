{"ast":null,"code":"import { createElementVNode as _createElementVNode, vShow as _vShow, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-b34a96ea\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"btn-div\",\n  id: \"ShareAccess\"\n};\nconst _hoisted_3 = {\n  class: \"formSection\",\n  id: \"ShareForm\"\n};\nconst _hoisted_4 = {\n  class: \"formDiv\"\n};\nconst _hoisted_5 = {\n  type: \"multipart/form-data\",\n  method: \"POST\",\n  name: \"form\",\n  id: \"CommentOnAComment\",\n  class: \"formulaire\"\n};\nconst _hoisted_6 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"CommentOnACommentText\",\n  class: \"label\"\n}, \"Votre réaction\", -1\n/* HOISTED */\n));\n\nconst _hoisted_8 = {\n  class: \"btn-div\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"section\", _hoisted_1, [_withDirectives(_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn\",\n    onClick: _cache[0] || (_cache[0] = $event => $options.displayForm()),\n    id: \"GoToShare\",\n    value: \"Partager\"\n  }, \" Une réaction ? \")], 512\n  /* NEED_PATCH */\n  ), [[_vShow, $data.ShareFormHidden]]), _withDirectives(_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"form\", _hoisted_5, [_createCommentVNode(\"Le Comment\"), _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _createElementVNode(\"textarea\", {\n    class: \"bigtextarea textarea input\",\n    form: \"CommentOnACommentText\",\n    type: \"textarea\",\n    onInput: _cache[1] || (_cache[1] = (...args) => $options.checkForm && $options.checkForm(...args)),\n    placeholder: \"...\",\n    autofocus: \"\",\n    id: \"CommentOnACommentText\",\n    name: \"CommentOnACommentText\"\n  }, null, 32\n  /* HYDRATE_EVENTS */\n  )]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn\",\n    onClick: _cache[2] || (_cache[2] = $event => $options.displayGoTo()),\n    id: \"CancelBtn\"\n  }, \"Annuler\"), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn\",\n    onClick: _cache[3] || (_cache[3] = $event => $options.CommentOnAComment()),\n    id: \"CommentOnACommentBtn\",\n    disabled: \"\"\n  }, \"Réagir\")])])])], 512\n  /* NEED_PATCH */\n  ), [[_vShow, !$data.ShareFormHidden]])]);\n}","map":{"version":3,"mappings":";;;;;AACaA,OAAK,EAAG;;;AACVA,OAAK,EAAC;AAAUC,IAAE,EAAC;;;AASnBD,OAAK,EAAG;AAAcC,IAAE,EAAC;;;AACrBD,OAAK,EAAG;;;AAEOE,MAAI,EAAC;AACLC,QAAM,EAAC;AACPC,MAAI,EAAC;AACLH,IAAE,EAAC;AACHD,OAAK,EAAC;;;AAGAA,OAAK,EAAC;;;gEACFK,oBAE8C,OAF9C,EAE8C;AADpCC,KAAG,EAAC,uBACgC;AAApCN,OAAK,EAAC;AAA8B,CAF9C,EAEwB,gBAFxB,EAEsC;AAAA;AAFtC;;;AAcLA,OAAK,EAAC;;;uBAnCrCO,oBA0CU,SA1CV,cA0CU,iBAzCRF,oBAQM,KARN,cAQM,CAPJA,oBAMS,QANT,EAMS;AANDH,QAAI,EAAC,QAMJ;AALDF,SAAK,EAAC,KAKL;AAJAQ,WAAK,sCAAEC,sBAAF,CAIL;AAHDR,MAAE,EAAC,WAGF;AAFDS,SAAK,EAAC;AAEL,GANT,EAIyB,kBAJzB,CAOI,CARN;;AAAA,eAA8CC,wBAyCtC,kBAhCRN,oBA+BM,KA/BN,cA+BM,CA9BFA,oBA6BM,KA7BN,cA6BM,CA5BIA,oBA2BO,MA3BP,cA2BO,CApBGO,iCAoBH,EAnBIP,oBAaK,KAbL,cAaK,CAZIQ,UAYJ,EATIR,oBAQkD,UARlD,EAQkD;AARxCL,SAAK,EAAC,4BAQkC;AAPxCc,QAAI,EAAC,uBAOmC;AANxCZ,QAAI,EAAC,UAMmC;AALvCa,WAAK,yCAAEN,iDAAF,CAKkC;AAHxCO,eAAW,EAAE,KAG2B;AAFxCC,aAAS,EAAT,EAEwC;AADxChB,MAAE,EAAC,uBACqC;AAAxCG,QAAI,EAAC;AAAmC,GARlD;;AAAA,GASJ,CAbL,CAmBJ,EAJGC,oBAGM,KAHN,cAGM,CAFIA,oBAAwF,QAAxF,EAAwF;AAAhFH,QAAI,EAAC,QAA2E;AAAlEF,SAAK,EAAC,KAA4D;AAArDQ,WAAK,sCAAEC,sBAAF,CAAgD;AAA/BR,MAAE,EAAC;AAA4B,GAAxF,EAAwE,SAAxE,CAEJ,EADII,oBAAiH,QAAjH,EAAiH;AAAzGH,QAAI,EAAC,QAAoG;AAA3FF,SAAK,EAAC,KAAqF;AAA9EQ,WAAK,sCAAEC,4BAAF,CAAyE;AAAlDR,MAAE,EAAC,sBAA+C;AAAxBiB,YAAQ,EAAR;AAAwB,GAAjH,EAAkG,QAAlG,CACJ,CAHN,CAIH,CA3BP,CA4BJ,CA7BN,CA8BE,CA/BN;;AAAA,gBAAmDP,wBAgC3C,CA1CV","names":["class","id","type","method","name","_createElementVNode","for","_createElementBlock","onClick","$options","value","$data","_createCommentVNode","_hoisted_7","form","onInput","placeholder","autofocus","disabled"],"sourceRoot":"","sources":["/Users/stefan/Library/Mobile Documents/com~apple~CloudDocs/08 WEB ET SITES/P7/frontend/src/components/PostACommentOnAComment.vue"],"sourcesContent":["<template>\n    <section class = \"container\">\n      <div class=\"btn-div\" id=\"ShareAccess\" v-show=\"ShareFormHidden\">\n        <button type=\"button\" \n                class=\"btn\" \n                @click=\"displayForm()\" \n                id=\"GoToShare\" \n                value=\"Partager\">\n                Une réaction ?\n        </button>\n      </div>\n      <div class = \"formSection\" id=\"ShareForm\" v-show=\"!ShareFormHidden\" >\n          <div class = \"formDiv\">\n                    <form     \n                              type=\"multipart/form-data\"\n                              method=\"POST\" \n                              name=\"form\" \n                              id=\"CommentOnAComment\"\n                              class=\"formulaire\">\n                              \n                              <!--Le Comment-->\n                               <div class=\"formLine\">\n                                        <label    \n                                                  for=\"CommentOnACommentText\" \n                                                  class=\"label\">Votre réaction</label>\n                                        <textarea class=\"bigtextarea textarea input\"\n                                                  form=\"CommentOnACommentText\" \n                                                  type=\"textarea\"\n                                                  @input=\"checkForm\"\n                                                 \n                                                  placeholder= \"...\"\n                                                  autofocus\n                                                  id=\"CommentOnACommentText\"\n                                                  name=\"CommentOnACommentText\"></textarea>\n                              </div>\n                                                         \n                              <div class=\"btn-div\">\n                                        <button type=\"button\" class=\"btn\" @click=\"displayGoTo()\" id=\"CancelBtn\">Annuler</button>\n                                        <button type=\"button\" class=\"btn\" @click=\"CommentOnAComment()\" id=\"CommentOnACommentBtn\" disabled>Réagir</button>\n                              </div>\n                    </form>\n          </div>\n      </div>\n    </section>\n</template>\n\n<script>\nexport default {\n  name: 'PostAComment',\n  data() {\n    return {\n          success: \"\",\n          message :\"\", //message d'erreur\n          CommentText: String,\n          ShareFormHidden :{\n            type: Boolean,\n            default: true }\n            }\n    },\n  \n  methods: {\n          displayForm(){\n            this.ShareFormHidden = false\n          },\n          displayGoTo(){\n            this.ShareFormHidden = true\n          },\n          checkForm() {\n                    if (document.getElementById(\"CommentOnACommentText\").textContent != null) {\n                      document.getElementById(\"CommentOnACommentBtn\").disabled = false;\n                    } else { document.getElementById(\"CommentOnACommentBtn\").disabled = true }\n          },\n          CommentOnAComment() {\n\n                    const Token = JSON.parse(sessionStorage.getItem(\"Token\"));\n                    const commentOnACommentText = document.getElementById(\"CommentOnACommentText\").value;\n                    const shareShareId = new URL(window.location.href).hash.split(\"=\")[1];\n\n                    const commentCommentId = document.getElementById(\"CommentOnACommentId\").textContent;\n\n                    const commentOnAComment = { \"CommentText\": commentOnACommentText,\n                                                \"shareShareId\": shareShareId,\n                                                \"commentCommentId\": commentCommentId,\n                    }\n                    console.log(commentOnAComment);\n\n                    fetch(\"http://localhost:3000/api/comments\", {\n                              method: 'POST',\n                              body: JSON.stringify(commentOnAComment),\n                              headers: {\n                                  \"Content-Type\": \"application/json\",\n                                  \"Accept\":\"*/*\",\n                                  \"Authorization\": \"Bearer \" + Token,\n                              },\n                              mode : \"cors\"})\n\n                    .then((response) => {\n                              if (response.status == 201) { \n                                        this.success= true;\n                                        this.message = \"Commentaire en ligne.\";\n                                        this.ShareFormHidden = true;\n                                        this.$router.push({ name: 'wall' });\n                                        this.$router.go(0);\n                                        \n                              } else {\n                                        response.json ()\n                                        .then ((json) => {\n                                        this.success= false;\n                                        console.log(json);\n                                        this.message = json.error ||  json.message ;\n                                        return this.message\n                                        })\n                              }\n                    })\n                    .catch (() => {\n                              this.success= false;\n                              this.message = `Le serveur ne répond pas ! Veuillez réessayer ultérieurement`;\n                    })         \n          }               \n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n#formImagePreview {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n#formImagePreview img {\n  max-width: 100%;\n  max-height: 500px;\n}\n\n</style>"]},"metadata":{},"sourceType":"module"}