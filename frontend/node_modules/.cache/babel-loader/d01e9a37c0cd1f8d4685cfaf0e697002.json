{"ast":null,"code":"import dayjs from 'dayjs';\n\nrequire('dayjs/locale/fr');\n\ndayjs.locale('fr');\nexport default {\n  name: 'ShareAll',\n\n  data() {\n    return {\n      apiResponse: Array,\n      commentLength: Number\n    };\n  },\n\n  methods: {\n    displayOneShare(id) {\n      this.$router.push({\n        name: 'wallAlone',\n        params: {\n          id: id\n        }\n      });\n    },\n\n    formatDate(dateString) {\n      const date = dayjs(dateString); // Then specify how you want your dates to be formatted\n\n      return date.format('dddd D MMMM YYYY , HH:mm');\n    }\n\n  },\n\n  beforeCreate() {\n    const Token = JSON.parse(sessionStorage.getItem(\"Token\"));\n    fetch(`http://localhost:3000/api/shares`, {\n      method: 'GET',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + Token\n      },\n      mode: \"cors\"\n    }).then(res => {\n      return res.json();\n    }).then(res => {\n      this.apiResponse = res;\n    }).catch(error => {\n      alert(error);\n    });\n  }\n\n};","map":{"version":3,"mappings":"AA6CU,OAAOA,KAAP,MAAkB,OAAlB;;AACAC,OAAO,CAAC,iBAAD,CAAP;;AACAD,KAAK,CAACE,MAAN,CAAa,IAAb;AAEA,eAAe;AACLC,MAAG,EAAI,UADF;;AAGLC,MAAI,GAAE;AACI,WAAO;AACCC,iBAAW,EAAEC,KADd;AAECC,mBAAY,EAAIC;AAFjB,KAAP;AAIT,GARI;;AAULC,SAAM,EAAI;AACRC,mBAAe,CAACC,EAAD,EAAK;AACpB,WAAKC,OAAL,CAAaC,IAAb,CAAkB;AAACV,YAAG,EAAI,WAAR;AAAqBW,cAAK,EAAI;AAACH,YAAC,EAAIA;AAAN;AAA9B,OAAlB;AACC,KAHO;;AAKRI,cAAU,CAACC,UAAD,EAAa;AACjB,YAAMC,IAAG,GAAIjB,KAAK,CAACgB,UAAD,CAAlB,CADiB,CAEb;;AACJ,aAAOC,IAAI,CAACC,MAAL,CAAY,0BAAZ,CAAP;AACL;;AATO,GAVL;;AAsBLC,cAAW,GAAK;AAGhB,UAAOC,KAAI,GAAIC,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAX,CAAf;AACAC,SAAK,CAAE,kCAAF,EAAqC;AACpCC,YAAM,EAAE,KAD4B;AAEpCC,aAAO,EAAE;AAAC,wBAAgB,kBAAjB;AACC,yBAAiB,YAAYP;AAD9B,OAF2B;AAKpCQ,UAAG,EAAI;AAL6B,KAArC,CAAL,CAOCC,IAPD,CAOOC,GAAD,IAAS;AACb,aAAOA,GAAG,CAACC,IAAJ,EAAP;AACD,KATD,EAUCF,IAVD,CAUOC,GAAD,IAAQ;AACZ,WAAKzB,WAAL,GAAiByB,GAAjB;AACD,KAZD,EAaCE,KAbD,CAaSC,KAAD,IAAW;AAAEC,WAAK,CAACD,KAAD,CAAL;AACpB,KAdD;AAeC;;AAzCI,CAAf","names":["dayjs","require","locale","name","data","apiResponse","Array","commentLength","Number","methods","displayOneShare","id","$router","push","params","formatDate","dateString","date","format","beforeCreate","Token","JSON","parse","sessionStorage","getItem","fetch","method","headers","mode","then","res","json","catch","error","alert"],"sourceRoot":"","sources":["/Users/stefan/Library/Mobile Documents/com~apple~CloudDocs/08 WEB ET SITES/P7/frontend/src/components/SharesAll.vue"],"sourcesContent":["<template>\n          <section class=\"mainshares\">\n                <div id=\"shares\" class=\"shares\">\n                      <a id=\"link\" v-for=\"item in apiResponse\"\n                        :key=\"item.ShareId\"\n                        @click=\"displayOneShare(item.ShareId)\">\n\n                            <div class=\"card\">\n                                    <div class=\"card__image\">\n                                            <div class=\"card__image--img\">\n                                              <img v-if=\"item.medium.MediaUrl.split(`/07media/`)[1] != `feather.png`\" :src='item.medium.MediaUrl'/>\n                                              <img v-else style=\"width : 30px\" :src='item.medium.MediaUrl'/>             \n                                            </div>\n                                    </div>\n\n                                    <div class=\"card__info\">\n                                            <div v-if=\"item.medium.MediaUrl.split(`/07media/`)[1] == `feather.png`\">\n                                                <p class=\"card__info--text textLimited\" style=\"height : 150px\">{{ item.ShareText }}</p>\n                                            </div>\n                                            <div v-else>\n                                                <p class=\"card__info--text textLimited\">{{ item.ShareText }}</p>\n                                            </div>\n                                            <div class=\"readMore\" @click=\"displayOneShare(item.ShareId)\">\n                                                    En savoir plus...\n                                            </div>\n\n                                            <div class=\"separator\"></div>\n                                            \n                                            <div class=card__info--complement>\n                                                <div class=\"card__info--complement--adress \">\n                                                    <p> {{item.user.UserFirstname}} {{item.user.UserName}}</p>\n                                                    <p> Service : {{item.user.UserDepartement}} <br/> Role : {{item.user.UserRole}}</p>\n                                                    <p hidden>{{ item.userUserId }}</p>\n                                                    <p> {{item.comments.length }} commentaire<x v-if=\"item.comments.length>1\">s</x></p>\n                                                    <p>{{ formatDate(item.updatedAt) }}</p>\n                                                </div>\n                                            </div>\n                                    </div>  \n                            </div>          \n                      </a>\n                </div>\n          </section>  \n</template>\n\n<script>\n          import dayjs from 'dayjs'\n          require('dayjs/locale/fr')\n          dayjs.locale('fr')\n\n          export default {\n                    name : 'ShareAll',\n\n                    data(){\n                              return {\n                                      apiResponse: Array,\n                                      commentLength : Number\n                              }\n                    },\n\n                    methods : {\n                      displayOneShare(id) {\n                      this.$router.push({name : 'wallAlone', params : {id : id}})\n                      },\n\n                      formatDate(dateString) {\n                            const date = dayjs(dateString);\n                                // Then specify how you want your dates to be formatted\n                            return date.format('dddd D MMMM YYYY , HH:mm');\n                      },\n                    },\n\n                    beforeCreate () {\n\n                      \n                    const  Token = JSON.parse(sessionStorage.getItem(\"Token\"));\n                    fetch(`http://localhost:3000/api/shares`, {\n                          method: 'GET',\n                          headers: {\"Content-Type\": \"application/json\", \n                                    \"Authorization\": \"Bearer \" + Token\n                          },\n                          mode : \"cors\"\n                          })\n                    .then((res) => {\n                      return res.json();\n                    })\n                    .then((res) =>{\n                      this.apiResponse=res\n                    })\n                    .catch( (error) => { alert(error);\n                    });\n                    },\n          }\n</script>\n\n<style lang=\"scss\" scoped>\n\n.readMore {\n  text-align: right;\n  font-style:italic;\n  font-size:13px;\n}\n.textLimited{\n  max-height:95px;\n  max-width:320px;\n  overflow: hidden;\n  text-overflow: ellipsis; // cela ne marche que si le texte n'est que sur une ligne : chercher une solution\n  margin: 0.5rem\n}\n\n.card__image img{\n  width:320px;\n}\n\n#line {\n  margin:2rem 0;\n  display: flex;\n  height: 2px;\n  border: solid 1px  #40cbc4;\n}\n\n</style>"]},"metadata":{},"sourceType":"module"}