{"ast":null,"code":"export default {\n  name: 'NavBar',\n\n  data() {\n    return {\n      token: \"\",\n      UserFirstname: \"\",\n      UserName: \"\"\n    };\n  },\n\n  methods: {\n    //-------- le logout efface toutes les données du sessionStorage -------///\n    logout() {\n      sessionStorage.clear(); // sessionStorage.removeItem(\"UserId\");\n      // sessionStorage.removeItem(\"Token\");\n      // sessionStorage.removeItem(\"isAdmin\");\n\n      this.$router.push({\n        name: 'enter'\n      });\n    }\n\n  },\n\n  //-------- la NavBar change en fonction de l'existence ou pas d'un Token d'authentification -------///\n  mounted() {\n    if (sessionStorage.getItem(\"Token\")) {\n      this.token = JSON.parse(sessionStorage.getItem(\"Token\"));\n      const UserId = JSON.parse(sessionStorage.getItem(\"UserId\"));\n      const Token = JSON.parse(sessionStorage.getItem(\"Token\"));\n      fetch(`http://localhost:3000/api/auth/${UserId}`, {\n        method: 'GET',\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": \"Bearer \" + Token\n        },\n        mode: \"cors\"\n      }).then(res => {\n        return res.json();\n      }).then(res => {\n        this.UserName = res.UserName;\n        this.UserFirstname = res.UserFirstname;\n      }).catch(error => {\n        alert(error);\n      });\n    } else {\n      this.token = null;\n    }\n  }\n\n};","map":{"version":3,"mappings":"AA8CA,eAAe;AACXA,MAAG,EAAI,QADI;;AAGXC,MAAI,GAAG;AACP,WAAO;AACDC,WAAK,EAAE,EADN;AAEDC,mBAAa,EAAE,EAFd;AAGDC,cAAQ,EAAC;AAHR,KAAP;AAIE,GARS;;AASXC,SAAM,EAAI;AAEN;AACAC,UAAM,GAAE;AACJC,oBAAc,CAACC,KAAf,GADI,CAEJ;AACA;AACA;;AACA,WAAKC,OAAL,CAAaC,IAAb,CAAkB;AAAEV,YAAI,EAAE;AAAR,OAAlB;AACH;;AATK,GATC;;AAqBX;AACAW,SAAO,GAAE;AAEL,QAAIJ,cAAc,CAACK,OAAf,CAAuB,OAAvB,CAAJ,EAAoC;AAEhC,WAAKV,KAAL,GAAaW,IAAI,CAACC,KAAL,CAAWP,cAAc,CAACK,OAAf,CAAuB,OAAvB,CAAX,CAAb;AACA,YAAOG,MAAK,GAAIF,IAAI,CAACC,KAAL,CAAWP,cAAc,CAACK,OAAf,CAAuB,QAAvB,CAAX,CAAhB;AACA,YAAOI,KAAI,GAAIH,IAAI,CAACC,KAAL,CAAWP,cAAc,CAACK,OAAf,CAAuB,OAAvB,CAAX,CAAf;AAEAK,WAAK,CAAE,kCAAiCF,MAAO,EAA1C,EAA6C;AAClDG,cAAM,EAAE,KAD0C;AAElDC,eAAO,EAAE;AAAC,0BAAgB,kBAAjB;AACG,2BAAiB,YAAYH;AADhC,SAFyC;AAKlDI,YAAG,EAAI;AAL2C,OAA7C,CAAL,CAOCC,IAPD,CAOOC,GAAD,IAAS;AACX,eAAOA,GAAG,CAACC,IAAJ,EAAP;AACH,OATD,EAUCF,IAVD,CAUOC,GAAD,IAAQ;AACV,aAAKlB,QAAL,GAAgBkB,GAAG,CAAClB,QAApB;AACA,aAAKD,aAAL,GAAqBmB,GAAG,CAACnB,aAAzB;AACH,OAbD,EAcCqB,KAdD,CAcSC,KAAD,IAAW;AAAEC,aAAK,CAACD,KAAD,CAAL;AACpB,OAfD;AAgBJ,KAtBA,MAsBO;AACH,WAAKvB,KAAL,GAAa,IAAb;AACJ;AACJ;;AAjDW,CAAf","names":["name","data","token","UserFirstname","UserName","methods","logout","sessionStorage","clear","$router","push","mounted","getItem","JSON","parse","UserId","Token","fetch","method","headers","mode","then","res","json","catch","error","alert"],"sourceRoot":"","sources":["/Users/stefan/Library/Mobile Documents/com~apple~CloudDocs/08 WEB ET SITES/P7/frontend/src/components/NavBar.vue"],"sourcesContent":["<template>\n    <nav class=\"navbar\">\n        <div class=\"navbar-container container\">\n            <input type=\"checkbox\" name=\"main-nav\">\n            \n                <div class=\"hamburger-lines\">\n                    <span class=\"line line1\"></span>\n                    <span class=\"line line2\"></span>\n                    <span class=\"line line3\"></span>\n                </div>\n\n                <ul class=\"navbar__items\">\n                    \n                    <li v-show=\"token\"><router-link to=\"/wall\">Le Forum</router-link></li>\n                    <li v-show=\"!token\"><router-link to=\"/signup\">S'inscrire</router-link></li>\n                    <li v-show=\"!token\"><router-link to=\"/login\">S'authentifier</router-link></li>\n                    <li v-show=\"token\" ><router-link to=\"/modify\">Gérér son compte</router-link></li>\n                    <li v-show=\"token\" ><router-link @click=\"logout()\" to=\"/deconnect\">Se déconnecter</router-link></li>\n                </ul>\n\n                <div class=\"logo\" >\n                    <img src=\"../assets/images/icon-above-font.svg\" alt=\"Logo Groupomania\" id=\"lelogogroupomania\">\n                </div>\n        </div>\n        <div>\n                  <p v-show=\"token\" id=\"authentification\"> \n                      Vous êtes authentifié en tant que {{  UserFirstname }} {{  UserName  }}\n                  </p>\n        </div>\n    </nav>\n    \n</template>\n\n<style lang=\"scss\" scoped>\n\n#authentification {\n    font-size : 12px;\n    font-style : italic;\n    text-align: center;\n    background-color: #fed7d7;\n}\n\n</style>\n\n<script>    \n\nexport default {\n    name : 'NavBar',\n\n    data() {\n    return {\n          token: \"\",\n          UserFirstname: \"\",\n          UserName:\"\",\n    }},\n    methods : {\n\n        //-------- le logout efface toutes les données du sessionStorage -------///\n        logout(){\n            sessionStorage.clear();\n            // sessionStorage.removeItem(\"UserId\");\n            // sessionStorage.removeItem(\"Token\");\n            // sessionStorage.removeItem(\"isAdmin\");\n            this.$router.push({ name: 'enter'});\n        },\n    },\n    \n    //-------- la NavBar change en fonction de l'existence ou pas d'un Token d'authentification -------///\n    mounted(){\n        \n        if (sessionStorage.getItem(\"Token\")){\n            \n            this.token = JSON.parse(sessionStorage.getItem(\"Token\"));\n            const  UserId = JSON.parse(sessionStorage.getItem(\"UserId\"));\n            const  Token = JSON.parse(sessionStorage.getItem(\"Token\"));\n\n            fetch(`http://localhost:3000/api/auth/${UserId}`, {\n            method: 'GET',\n            headers: {\"Content-Type\": \"application/json\", \n                        \"Authorization\": \"Bearer \" + Token\n            },\n            mode : \"cors\"\n            })\n            .then((res) => {\n                return res.json();\n            })\n            .then((res) =>{\n                this.UserName = res.UserName;\n                this.UserFirstname = res.UserFirstname;\n            })\n            .catch( (error) => { alert(error);\n            });\n        } else {\n            this.token = null\n        }\n    }\n}\n\n</script>"]},"metadata":{},"sourceType":"module"}