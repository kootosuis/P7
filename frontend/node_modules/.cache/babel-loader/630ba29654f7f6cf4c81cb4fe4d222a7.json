{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vShow as _vShow, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"formSection\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"please\"\n}, [/*#__PURE__*/_createElementVNode(\"h2\", null, \" Vous pouvez mettre à jour les données de votre compte \")], -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = {\n  class: \"formDiv\"\n};\nconst _hoisted_5 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"UserName\",\n  class: \"label\"\n}, [/*#__PURE__*/_createTextVNode(\"Nom \"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"asterisque\"\n}, \"*\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"UserFirstname\",\n  class: \"label\"\n}, [/*#__PURE__*/_createTextVNode(\"Prénom \"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"asterisque\"\n}, \"*\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_9 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"UserEmail\",\n  class: \"label\"\n}, [/*#__PURE__*/_createTextVNode(\"Email \"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"asterisque\"\n}, \"*\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_11 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"UserPresentation\",\n  class: \"label\"\n}, \"Présentation\", -1\n/* HOISTED */\n);\n\nconst _hoisted_13 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"UserDepartement\",\n  class: \"label\"\n}, [/*#__PURE__*/_createTextVNode(\"Service \"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"asterisque\"\n}, \"*\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_15 = /*#__PURE__*/_createStaticVNode(\"<option value=\\\"...\\\">...</option><option value=\\\"communication\\\">communication</option><option value=\\\"administration\\\">administration</option><option value=\\\"siège\\\">siège</option><option value=\\\"R&amp;D\\\">R&amp;D</option><option value=\\\"magasin 1\\\">magasin 1</option><option value=\\\"magasin 2\\\">magasin 2</option><option value=\\\"etc.\\\">etc.</option>\", 8);\n\nconst _hoisted_23 = [_hoisted_15];\nconst _hoisted_24 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_25 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"UserRole\",\n  class: \"label\"\n}, \"Rôle\", -1\n/* HOISTED */\n);\n\nconst _hoisted_26 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_27 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"UserPassword\",\n  class: \"label\"\n}, [/*#__PURE__*/_createTextVNode(\"Mot de passe \"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"asterisque\"\n}, \"*\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_28 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"formLine formLineTop\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"label\"\n}), /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"hint input\"\n}, [/*#__PURE__*/_createTextVNode(\" Vous pouvez changer de mot de passe.\"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createTextVNode(\" Le mot de passe doit contenir au minimum 8 caractères, dont une majuscule, une minuscule, un chiffre et un caractère spécial.\")])], -1\n/* HOISTED */\n);\n\nconst _hoisted_29 = {\n  key: 0,\n  class: \"formLine\"\n};\n\nconst _hoisted_30 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"UserHabilitation\",\n  class: \"label\"\n}, \"Habilitation\", -1\n/* HOISTED */\n);\n\nconst _hoisted_31 = {\n  class: \"input\"\n};\nconst _hoisted_32 = {\n  key: 0,\n  id: \"UserHabilitation\",\n  name: \"UserHabilitation\",\n  required: \"required\"\n};\n\nconst _hoisted_33 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"0\"\n}, \"sans habilitation à administrer\", -1\n/* HOISTED */\n);\n\nconst _hoisted_34 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"1\"\n}, \"avec habilitation à administrer\", -1\n/* HOISTED */\n);\n\nconst _hoisted_35 = [_hoisted_33, _hoisted_34];\nconst _hoisted_36 = {\n  key: 1,\n  id: \"UserHabilitation\",\n  name: \"UserHabilitation\",\n  required: \"required\"\n};\n\nconst _hoisted_37 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"1\"\n}, \"avec habilitation à administrer\", -1\n/* HOISTED */\n);\n\nconst _hoisted_38 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"0\"\n}, \"sans habilitation à administrer\", -1\n/* HOISTED */\n);\n\nconst _hoisted_39 = [_hoisted_37, _hoisted_38];\n\nconst _hoisted_40 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"asterisque\",\n  style: {\n    \"text-align\": \"right\"\n  }\n}, \" * Champs requis \", -1\n/* HOISTED */\n);\n\nconst _hoisted_41 = {\n  class: \"btn-div\"\n};\n\nconst _hoisted_42 = /*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"submit\",\n  class: \"btn\",\n  id: \"UserSignupBtn\",\n  value: \"Mettre à jour\",\n  disabled: \"\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_43 = {\n  class: \"add-div\"\n};\nconst _hoisted_44 = {\n  id: \"erreur\"\n};\nconst _hoisted_45 = {\n  class: \"add-div\"\n};\nconst _hoisted_46 = {\n  id: \"erreur\"\n};\nconst _hoisted_47 = {\n  id: \"no-account\",\n  class: \"add-div\"\n};\n\nconst _hoisted_48 = /*#__PURE__*/_createElementVNode(\"p\", null, \" Vous pouvez si vous le souhaitez, effacer votre compte ainsi que tous les partages et commentaires qui y sont liés\", -1\n/* HOISTED */\n);\n\nconst _hoisted_49 = {\n  class: \"btn-div\"\n};\n\nconst _hoisted_50 = /*#__PURE__*/_createTextVNode(\"Effacer\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  return _openBlock(), _createElementBlock(\"section\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"form\", {\n    class: \"formulaire\",\n    method: \"PUT\",\n    name: \"form\",\n    id: \"form\",\n    onSubmit: _cache[12] || (_cache[12] = (...args) => $options.modifySignup && $options.modifySignup(...args))\n  }, [_createCommentVNode(\"Le Nom\"), _createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    class: \"input\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.UserName = $event),\n    onInput: _cache[1] || (_cache[1] = (...args) => $options.checkForm && $options.checkForm(...args)),\n    type: \"text\",\n    placeholder: \"Entrez votre nom.\",\n    id: \"UserName\",\n    name: \"UserName\",\n    required: \"required\"\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), [[_vModelText, $data.UserName]])]), _createCommentVNode(\"Le Prénom\"), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _withDirectives(_createElementVNode(\"input\", {\n    class: \"input\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.UserFirstname = $event),\n    onInput: _cache[3] || (_cache[3] = (...args) => $options.checkForm && $options.checkForm(...args)),\n    type: \"text\",\n    placeholder: \"Entrez votre prénom.\",\n    id: \"UserFirstname\",\n    name: \"UserFirstname\",\n    required: \"required\"\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), [[_vModelText, $data.UserFirstname]])]), _createCommentVNode(\"L'Email'\"), _createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _withDirectives(_createElementVNode(\"input\", {\n    class: \"input\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.UserEmail = $event),\n    onInput: _cache[5] || (_cache[5] = (...args) => $options.checkForm && $options.checkForm(...args)),\n    type: \"email\",\n    placeholder: \"Entrez une adresse mail valide.\",\n    id: \"UserEmail\",\n    name: \"UserEmail\",\n    required: \"\"\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), [[_vModelText, $data.UserEmail]])]), _createCommentVNode(\"La Présentation\"), _createElementVNode(\"div\", _hoisted_11, [_hoisted_12, _withDirectives(_createElementVNode(\"textarea\", {\n    class: \"smalltextarea input\",\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.UserPresentation = $event),\n    type: \"textarea\",\n    placeholder: \"Si vous le souhaitez, vous pouvez vous présenter...\",\n    id: \"UserPresentation\",\n    name: \"UserPresentation\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.UserPresentation]])]), _createCommentVNode(\"Le Service\"), _createElementVNode(\"div\", _hoisted_13, [_hoisted_14, _withDirectives(_createElementVNode(\"select\", {\n    class: \"input\",\n    id: \"UserDepartement\",\n    name: \"UserDepartement\",\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $data.UserDepartement = $event),\n    required: \"required\"\n  }, _hoisted_23, 512\n  /* NEED_PATCH */\n  ), [[_vModelSelect, $data.UserDepartement]])]), _createCommentVNode(\"Le Role\"), _createElementVNode(\"div\", _hoisted_24, [_hoisted_25, _withDirectives(_createElementVNode(\"textarea\", {\n    class: \"smalltextarea input\",\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $data.UserRole = $event),\n    type: \"textarea\",\n    placeholder: \"Quel est votre rôle dans l'entreprise ?\",\n    id: \"UserRole\",\n    name: \"UserRole\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.UserRole]])]), _createCommentVNode(\"Le Mot de passe \"), _createElementVNode(\"div\", _hoisted_26, [_hoisted_27, _withDirectives(_createElementVNode(\"input\", {\n    class: \"input\",\n    \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => $data.UserPassword = $event),\n    onInput: _cache[10] || (_cache[10] = (...args) => $options.checkForm && $options.checkForm(...args)),\n    type: \"password\",\n    id: \"UserPassword\",\n    name: \"UserPassword\",\n    maxlength: \"30\"\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), [[_vModelText, $data.UserPassword]])]), _hoisted_28, _createCommentVNode(\"L'habilitation \"), $data.isAdmin ? (_openBlock(), _createElementBlock(\"div\", _hoisted_29, [_hoisted_30, _createElementVNode(\"div\", _hoisted_31, [!_ctx.Userhabilitation ? (_openBlock(), _createElementBlock(\"select\", _hoisted_32, _hoisted_35)) : _createCommentVNode(\"v-if\", true), _ctx.Userhabilitation ? (_openBlock(), _createElementBlock(\"select\", _hoisted_36, _hoisted_39)) : _createCommentVNode(\"v-if\", true)])])) : _createCommentVNode(\"v-if\", true), _hoisted_40, _createElementVNode(\"div\", _hoisted_41, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn\",\n    onClick: _cache[11] || (_cache[11] = $event => $options.goBacKToForum()),\n    id: \"CancelBtn\"\n  }, \"Annuler\"), _hoisted_42])], 32\n  /* HYDRATE_EVENTS */\n  ), _createCommentVNode(\" A FAIRE : implementer des components modaux \"), _withDirectives(_createElementVNode(\"div\", _hoisted_43, [_createElementVNode(\"p\", _hoisted_44, \" Tout va bien : \" + _toDisplayString($data.message), 1\n  /* TEXT */\n  )], 512\n  /* NEED_PATCH */\n  ), [[_vShow, $data.success === true]]), _withDirectives(_createElementVNode(\"div\", _hoisted_45, [_createElementVNode(\"p\", _hoisted_46, \" Echec de la mise à jour : \" + _toDisplayString($data.message), 1\n  /* TEXT */\n  )], 512\n  /* NEED_PATCH */\n  ), [[_vShow, $data.success === false]]), _createElementVNode(\"div\", _hoisted_47, [_hoisted_48, _createElementVNode(\"div\", _hoisted_49, [_createVNode(_component_router_link, {\n    onClick: _cache[13] || (_cache[13] = $event => $options.deleteAccount()),\n    class: \"btn\",\n    to: \"../deconnect\"\n  }, {\n    default: _withCtx(() => [_hoisted_50]),\n    _: 1\n    /* STABLE */\n\n  })])])])])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","for","_hoisted_15","id","name","required","value","_hoisted_33","_hoisted_34","_hoisted_37","_hoisted_38","style","type","disabled","_createElementBlock","_hoisted_3","method","onSubmit","$options","_createCommentVNode","_hoisted_6","$data","$event","onInput","placeholder","_hoisted_8","_hoisted_10","_hoisted_12","_hoisted_14","_hoisted_25","_hoisted_27","maxlength","_hoisted_28","_hoisted_30","_ctx","_hoisted_35","_hoisted_39","_hoisted_40","onClick","_hoisted_42","_toDisplayString","_hoisted_48","_createVNode","_component_router_link","to"],"sourceRoot":"","sources":["/Users/stefan/Library/Mobile Documents/com~apple~CloudDocs/08 WEB ET SITES/P7/frontend/src/components/UserModifyCompByAdmin.vue"],"sourcesContent":["<template>\n    <section class = \"container\">\n      <div class = \"formSection\">\n\n          <div class=\"please\" >\n            <h2> Vous pouvez mettre à jour les données de votre compte </h2>\n          </div>\n\n          <div class = \"formDiv\">\n                    <form     class=\"formulaire\"\n                              method=\"PUT\" \n                              name=\"form\" \n                              id=\"form\" \n\n                              @submit = \"modifySignup\">\n                             \n                              <!--Le Nom-->\n                              <div class=\"formLine\">\n                                        <label\n                                                  for=\"UserName\" \n                                                  class=\"label\">Nom <span class=\"asterisque\">*</span></label>\n                                        <input    class=\"input\"\n                                                  v-model=\"UserName\" \n                                                  @input = \"checkForm\"    \n                                                  type=\"text\" \n                                                  placeholder=\"Entrez votre nom.\" \n                                                  id=\"UserName\" \n                                                  name=\"UserName\" \n                                                  required=\"required\">\n                              </div>\n\n                              <!--Le Prénom-->\n                              <div class=\"formLine\">\n                                        <label \n                                                  for=\"UserFirstname\" \n                                                  class=\"label\">Prénom <span class=\"asterisque\">*</span></label>\n                                        <input    class=\"input\"\n                                                  v-model=\"UserFirstname\" \n                                                  @input = \"checkForm\"  \n                                                  type=\"text\" \n                                                  placeholder=\"Entrez votre prénom.\" \n                                                  id=\"UserFirstname\" \n                                                  name=\"UserFirstname\" \n                                                  required=\"required\">\n                              </div>\n\n                              <!--L'Email'-->\n                               <div class=\"formLine\">\n                                        <label    \n                                                  for=\"UserEmail\" \n                                                  class=\"label\">Email <span class=\"asterisque\">*</span></label>\n                                        <input    class=\"input\"\n                                                  v-model=\"UserEmail\" \n                                                  @input = \"checkForm\"    \n                                                  type=\"email\" \n                                                  placeholder=\"Entrez une adresse mail valide.\" \n                                                  id=\"UserEmail\"\n                                                  name=\"UserEmail\" \n                                                  required=\"\">\n                              </div>\n\n                              <!--La Présentation-->\n                              <div class=\"formLine\">\n                                        <label \n                                                  for=\"UserPresentation\" \n                                                  class=\"label\">Présentation</label>\n                                        <textarea   class=\"smalltextarea input\"\n                                                  v-model=\"UserPresentation\" \n                                                  type=\"textarea\"\n                                                  placeholder=\"Si vous le souhaitez, vous pouvez vous présenter...\" \n                                                  id=\"UserPresentation\" \n                                                  name=\"UserPresentation\" \n                                                  ></textarea>\n                              </div>\n\n                              <!--Le Service-->\n                              <div class=\"formLine\">\n                                        <label \n                                                  for=\"UserDepartement\" \n                                                  class=\"label\">Service <span class=\"asterisque\">*</span></label>\n\n                                          <select class=\"input\"\n                                                  id=\"UserDepartement\" \n                                                  name=\"UserDepartement\"\n                                                  v-model=\"UserDepartement\"  \n                                                  required=\"required\">\n                                                    <option value=\"...\">...</option>\n                                                    <option value=\"communication\">communication</option>\n                                                    <option value=\"administration\">administration</option>\n                                                    <option value=\"siège\">siège</option>\n                                                    <option value=\"R&amp;D\">R&amp;D</option>\n                                                    <option value=\"magasin 1\">magasin 1</option>\n                                                    <option value=\"magasin 2\">magasin 2</option>\n                                                    <option value=\"etc.\">etc.</option>\n                                          </select>\n                              </div>\n\n                              <!--Le Role-->\n                              <div class=\"formLine\">\n                                        <label    \n                                        for=\"UserRole\" \n                                                  class=\"label\">Rôle</label>\n                                        <textarea    class=\"smalltextarea input\"\n                                                  v-model=\"UserRole\" \n                                                  type=\"textarea\" \n                                                  placeholder=\"Quel est votre rôle dans l'entreprise ?\" \n                                                  id=\"UserRole\" \n                                                  name=\"UserRole\"></textarea>\n                              </div>\n\n                              <!--Le Mot de passe -->\n                              <div class=\"formLine\">\n                                        <label    \n                                                  for=\"UserPassword\" \n                                                  class=\"label\">Mot de passe <span class=\"asterisque\">*</span></label>\n                                        <input    class=\"input\"\n                                                  v-model=\"UserPassword\" \n                                                  @input = \"checkForm\"    \n                                                  type=\"password\" \n                                                  id=\"UserPassword\" \n                                                  name=\"UserPassword\" \n                                                  maxlength=\"30\">\n                              </div>\n                              <div class=\"formLine formLineTop\">\n                                <div class=\"label\"></div>\n                                <p class=\"hint input\"> Vous pouvez changer de mot de passe.<br/><br/>\n                                                       Le mot de passe doit contenir au minimum 8 caractères, dont une majuscule, une minuscule, un chiffre et un caractère spécial.</p>\n                              </div>\n\n                              <!--L'habilitation -->\n                              <div class=\"formLine\" v-if=\"isAdmin\">\n                                        <label    \n                                                  for=\"UserHabilitation\" \n                                                  class=\"label\">Habilitation</label>\n                                        <div     \n                                                  class=\"input\">\n                                                  <select   v-if=\"!Userhabilitation \"\n                                                            id=\"UserHabilitation\" \n                                                            name=\"UserHabilitation\" \n                                                            required=\"required\">\n                                                                      <option value=0>sans habilitation à administrer</option>  \n                                                                      <option value=1>avec habilitation à administrer</option>\n                                                  </select>  \n                                                  <select   v-if=\"Userhabilitation\"\n                                                            id=\"UserHabilitation\" \n                                                            name=\"UserHabilitation\" \n                                                            required=\"required\">\n                                                                      <option value=1>avec habilitation à administrer</option>\n                                                                      <option value=0>sans habilitation à administrer</option>  \n                                                  </select>                                                       \n                                        </div>\n                              </div>\n\n                              <div class=\"asterisque\" style=\"text-align:right\"> * Champs requis </div>\n\n                              <div class=\"btn-div\">\n                                        <button type=\"button\" class=\"btn\" @click=\"goBacKToForum()\" id=\"CancelBtn\">Annuler</button>\n                                        <input type=\"submit\"  class=\"btn\" id=\"UserSignupBtn\" value=\"Mettre à jour\" disabled>           \n                              </div>\n       \n                    </form>\n\n                    <!-- A FAIRE : implementer des components modaux -->\n\n                    <div class=\"add-div\" v-show=\"success===true\">\n                      <p id=\"erreur\" > Tout va bien : {{message}} </p>\n                    </div>\n                    <div class=\"add-div\" v-show=\"success===false\">\n                      <p id=\"erreur\" > Echec de la mise à jour : {{message}} </p>\n                    </div>\n\n                    <div id=\"no-account\" class=\"add-div\">\n                      <p> Vous pouvez si vous le souhaitez, effacer votre compte ainsi que tous les partages et commentaires qui y sont liés</p>\n                      <div class=\"btn-div\"><router-link @click=\"deleteAccount()\" class=\"btn\" to=\"../deconnect\">Effacer</router-link> </div>\n                    </div>\n\n          </div>\n       </div>\n    </section>\n</template>\n\n<script>\nexport default {\n  name: 'UserModifyCompByAdmin',\n  \n  data() {\n    return {\n    UserName:\"\",\n    UserFirstname:\"\", \n    UserEmail:\"\", \n    UserPresentation:\"\",\n    UserDepartement:\"\", \n    UserRole:\"\", \n    UserPassword:\"\",\n    UserHabilitation:\"\",     \n    success:\"\",\n    message :\"\", //message d'erreur\n\n    AdminLength : {\n      type: Boolean,\n      default : false\n    },\n\n    isAdmin: {\n      type: Boolean,\n      default : false\n    }\n\n    }\n  },\n\n   beforeMount () {\n    this.isAdmin = sessionStorage.getItem(\"isAdmin\");\n    const  UserId = new URL(window.location.href).hash.split(\"/modifyByAdmin/\")[1];\n    const  Token = JSON.parse(sessionStorage.getItem(\"Token\"));\n\n          ///----- on vérifie d'abord qu'il y a au minimum deux administrateurs ----///\n          fetch(`http://localhost:3000/api/auth/safeAdmin`, {\n          method: 'GET',\n          headers: {\"Content-Type\": \"application/json\", \n                    \"Authorization\": \"Bearer \" + Token\n           },\n           mode : \"cors\"\n          })\n          .then((res) => {\n            return res.json();\n          })\n          .then((res) =>{\n            if (res.length > 2) {\n              this.AdminLength = true\n            } else {\n              this.AdminLength = false\n            }\n          })\n          .catch( (error) => { alert(error);\n          });\n\n\n          ///----on peut ensuite accèder au profil User------///\n          fetch(`http://localhost:3000/api/auth/${UserId}`, {\n          method: 'GET',\n          headers: {\"Content-Type\": \"application/json\", \n                    \"Authorization\": \"Bearer \" + Token\n           },\n           mode : \"cors\"\n          })\n          .then((res) => {\n            return res.json();\n          })\n          .then((res) =>{\n            this.UserName = res.UserName;\n            this.UserFirstname = res.UserFirstname;\n            this.UserEmail = res.UserEmail;\n            this.UserPresentation = res.UserPresentation;\n            this.UserDepartement = res.UserDepartement;\n            this.UserRole = res.UserRole;\n            this.UserPassword = res.UserPassword;\n            this.UserHabilitation=res.UserHabilitation\n          })\n          .catch( (error) => { alert(error);\n          });\n        },\n\n  methods: {\n\n    checkForm() {\n\n      if (document.getElementById(\"UserName\").checkValidity() \n      && document.getElementById(\"UserFirstname\").checkValidity() \n      && document.getElementById(\"UserEmail\").checkValidity()\n      && document.getElementById(\"UserPassword\").checkValidity()\n      ) {\n        document.getElementById(\"UserSignupBtn\").disabled = false\n      }\n      else {document.getElementById(\"UserSignupBtn\").disabled = true;\n    }},\n    \n    goBacKToForum(){\n      this.$router.push({ name: 'wall' })\n    },\n\n    modifySignup(e) {\n\n      e.preventDefault();\n\n      const Token = JSON.parse(sessionStorage.getItem(\"Token\"));\n\n      const UserName = document.getElementById(\"UserName\").value\n      const UserFirstname = document.getElementById(\"UserFirstname\").value\n      const UserEmail = document.getElementById(\"UserEmail\").value\n      const UserPresentation = document.getElementById(\"UserPresentation\").value\n      const UserDepartement= document.getElementById(\"UserDepartement\").value\n      const UserRole = document.getElementById(\"UserRole\").value;\n      const UserPassword = document.getElementById(\"UserPassword\").value;\n      const UserHabilitation = document.getElementById(\"UserHabilitation\").value;\n\n      const User = { \"UserName\": UserName,\n                     \"UserFirstname\": UserFirstname,\n                     \"UserEmail\": UserEmail,\n                     \"UserDepartement\": UserDepartement,\n                     \"UserPresentation\": UserPresentation,\n                     \"UserRole\": UserRole,\n                      \"UserPassword\": UserPassword,\n                     \"UserHabilitation\" : UserHabilitation,\n      }\n\n      fetch(\"http://localhost:3000/api/auth/modifySignup\", {\n          method: 'PUT',\n          body: JSON.stringify(User),\n          headers: {\"Content-Type\": \"application/json\", \n                    \"Authorization\": \"Bearer \" + Token\n           },\n           mode : \"cors\"\n          })\n      .then((response) => {\n                    if (response.status == 201) { \n                              response.json()\n                              .then((res) => {\n\n                                console.log(res);\n                                    this.success= true;\n                                    this.message =  \"Mise à jour effectuée\"\n                                    sessionStorage.setItem(\"isAdmin\", JSON.stringify(response.UserHabilitation));\n                                    setTimeout(() => this.$router.push({ name: 'wall' }), 4000)\n                              })\n                    } else {\n                              response.json ()\n                              .then ((json) => {\n                              this.success= false;\n                              console.log(json);\n                              this.message = json.error;\n                              })\n                    }\n       })\n      .catch (() => {\n              this.success= false;\n              this.message = `Le serveur ne répond pas ! Veuillez réessayer ultérieurement`;\n      })         \n    },\n    \n    deleteAccount(){\n\n      const  UserId = JSON.parse(sessionStorage.getItem(\"UserId\"));\n      const  Token = JSON.parse(sessionStorage.getItem(\"Token\"));\n\n      fetch(`http://localhost:3000/api/auth/delete/${UserId}`, {\n          method: 'DELETE',\n          headers: {\"Content-Type\": \"application/json\", \n                    \"Authorization\": \"Bearer \" + Token\n           },\n          mode :\"cors\"\n      }).then(\n        sessionStorage.removeItem(\"UserId\"),\n        sessionStorage.removeItem(\"Token\"),\n        sessionStorage.removeItem(\"isAdmin\")\n      )\n    }\n  }\n}             \n  \n</script>\n\n<style lang=\"scss\" scoped>\n\n\n</style>"]},"metadata":{},"sourceType":"module"}