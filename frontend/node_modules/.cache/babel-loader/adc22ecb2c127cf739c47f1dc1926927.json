{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, vShow as _vShow, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-0584e824\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"btn-div\",\n  id: \"ShareAccess\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" Et vous,\");\n\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" que voulez-vous partager? \");\n\nconst _hoisted_6 = [_hoisted_3, _hoisted_4, _hoisted_5];\nconst _hoisted_7 = {\n  class: \"formSection\",\n  id: \"ShareForm\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"please\"\n}, [/*#__PURE__*/_createElementVNode(\"h2\", null, \" Votre partage \")], -1\n/* HOISTED */\n));\n\nconst _hoisted_9 = {\n  class: \"formDiv\"\n};\nconst _hoisted_10 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"Media\",\n  class: \"label\"\n}, \"Votre image, votre GIF\", -1\n/* HOISTED */\n));\n\nconst _hoisted_12 = {\n  id: \"formImagePreview\"\n};\nconst _hoisted_13 = [\"src\"];\nconst _hoisted_14 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"ShareText\",\n  class: \"label\"\n}, \"Votre texte\", -1\n/* HOISTED */\n));\n\nconst _hoisted_16 = {\n  class: \"btn-div\"\n};\nconst _hoisted_17 = {\n  class: \"add-div\"\n};\nconst _hoisted_18 = {\n  id: \"erreur\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"section\", _hoisted_1, [_withDirectives(_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn\",\n    onClick: _cache[0] || (_cache[0] = $event => $options.displayForm()),\n    id: \"GoToShare\",\n    value: \"Partager\"\n  }, _hoisted_6)], 512\n  /* NEED_PATCH */\n  ), [[_vShow, $data.ShareFormHidden]]), _withDirectives(_createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"form\", {\n    type: \"multipart/form-data\",\n    method: \"POST\",\n    name: \"form\",\n    id: \"ShareToBePosted\",\n    onSubmit: _cache[6] || (_cache[6] = (...args) => $options.Share && $options.Share(...args)),\n    class: \"formulaire\"\n  }, [_createCommentVNode(\"Le Media \"), _createElementVNode(\"div\", _hoisted_10, [_hoisted_11, _createElementVNode(\"input\", {\n    class: \"input\",\n    form: \"ShareToBePosted\",\n    onInput: _cache[1] || (_cache[1] = (...args) => $options.checkForm && $options.checkForm(...args)),\n    onChange: _cache[2] || (_cache[2] = $event => $options.uploadImage($event)),\n    type: \"file\",\n    accept: \"image/png, image/jpg, image/jpeg, image/png, image/gif\",\n    multiple: \"\",\n    id: \"Media\",\n    name: \"file\"\n  }, null, 32\n  /* HYDRATE_EVENTS */\n  )]), _createElementVNode(\"div\", _hoisted_12, [$data.file ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    src: $data.file\n  }, null, 8\n  /* PROPS */\n  , _hoisted_13)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\"Le Share\"), _createElementVNode(\"div\", _hoisted_14, [_hoisted_15, _createElementVNode(\"textarea\", {\n    class: \"bigtextarea textarea input\",\n    form: \"ShareToBePosted\",\n    type: \"textarea\",\n    onInput: _cache[3] || (_cache[3] = (...args) => $options.checkForm && $options.checkForm(...args)),\n    placeholder: \"...\",\n    autofocus: \"\",\n    id: \"ShareText\",\n    name: \"ShareText\"\n  }, null, 32\n  /* HYDRATE_EVENTS */\n  )]), _createCommentVNode(\" A ÉTUDIER \"), _createCommentVNode(\" https://css-tricks.com/auto-growing-inputs-textareas/ \"), _createCommentVNode(\" https://stackoverflow.com/questions/2803880/is-there-a-way-to-get-a-textarea-to-stretch-to-fit-its-content-without-using-php \"), _createCommentVNode(\" https://www.skymac.org/Admin-Dev/article-5d6989e5-Astuce-HTML-Javascript-Creer-un-textarea-a-la-hauteur-auto-adaptative-1.htm \"), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn\",\n    onClick: _cache[4] || (_cache[4] = $event => $options.displayGoTo()),\n    id: \"CancelBtn\"\n  }, \"Annuler\"), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn\",\n    onClick: _cache[5] || (_cache[5] = $event => $options.Share()),\n    id: \"ShareBtn\",\n    disabled: \"\"\n  }, \"Partager\")])], 32\n  /* HYDRATE_EVENTS */\n  ), _withDirectives(_createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"p\", _hoisted_18, \" Echec du partage : \" + _toDisplayString($data.message), 1\n  /* TEXT */\n  )], 512\n  /* NEED_PATCH */\n  ), [[_vShow, $data.success === false]])])], 512\n  /* NEED_PATCH */\n  ), [[_vShow, !$data.ShareFormHidden]])]);\n}","map":{"version":3,"mappings":"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","names":["class","id","_createElementVNode","_hoisted_4","for","_createElementBlock","type","onClick","$options","value","$data","_hoisted_8","method","name","onSubmit","_createCommentVNode","_hoisted_11","form","onInput","onChange","$event","accept","multiple","src","_hoisted_15","placeholder","autofocus","disabled","_toDisplayString"],"sourceRoot":"","sources":["/Users/stefan/Library/Mobile Documents/com~apple~CloudDocs/08 WEB ET SITES/P7/frontend/src/components/PostAShare.vue"],"sourcesContent":["<template>\n    <section class = \"container\">\n      <div class=\"btn-div\" id=\"ShareAccess\" v-show=\"ShareFormHidden\">\n        <button type=\"button\" \n                class=\"btn\" \n                @click=\"displayForm()\" \n                id=\"GoToShare\" \n                value=\"Partager\">\n                Et vous,<br/> que voulez-vous partager?\n        </button>\n      </div>\n      <div class = \"formSection\" id=\"ShareForm\" v-show=\"!ShareFormHidden\" >\n          <div class=\"please\">\n            <h2 > Votre partage </h2>\n          </div>\n          <div class = \"formDiv\">\n                    <form     \n                              type=\"multipart/form-data\"\n                              method=\"POST\" \n                              name=\"form\" \n                              id=\"ShareToBePosted\"\n                              \n                              @submit = \"Share\"\n                              class=\"formulaire\">\n\n                               <!--Le Media -->\n                              <div class=\"formLine\">\n                                        <label    \n                                                  for=\"Media\" \n                                                  class=\"label\">Votre image, votre GIF</label>\n                                        <input    class=\"input\"\n                                                  form=\"ShareToBePosted\" \n                                                  @input=\"checkForm\"\n                                                  @change=\"uploadImage($event)\"\n                                                  type=\"file\"\n                                                  accept=\"image/png, image/jpg, image/jpeg, image/png, image/gif\"\n                                                  multiple\n                                                  id=\"Media\" \n                                                  name=\"file\" \n                                                 >\n                              </div>\n\n                              <div id=\"formImagePreview\">\n                                        <img v-if=\"file\" :src=\"file\" />\n                              </div>\n                              \n                              <!--Le Share-->\n                               <div class=\"formLine\">\n                                        <label    \n                                                  for=\"ShareText\" \n                                                  class=\"label\">Votre texte</label>\n                                        <textarea class=\"bigtextarea textarea input\"\n                                                  form=\"ShareToBePosted\" \n                                                  type=\"textarea\"\n                                                  @input=\"checkForm\"\n                                                 \n                                                  placeholder= \"...\"\n                                                  autofocus\n                                                  id=\"ShareText\"\n                                                  name=\"ShareText\"\n                                                  ></textarea>\n                              </div>\n                              \n                              <!-- A ÉTUDIER -->\n                              <!-- https://css-tricks.com/auto-growing-inputs-textareas/ -->\n                              <!-- https://stackoverflow.com/questions/2803880/is-there-a-way-to-get-a-textarea-to-stretch-to-fit-its-content-without-using-php -->\n                              <!-- https://www.skymac.org/Admin-Dev/article-5d6989e5-Astuce-HTML-Javascript-Creer-un-textarea-a-la-hauteur-auto-adaptative-1.htm -->\n\n\n                              <div class=\"btn-div\">\n                                        <button type=\"button\" class=\"btn\" @click=\"displayGoTo()\" id=\"CancelBtn\">Annuler</button>\n                                        <button type=\"button\" class=\"btn\" @click=\"Share()\" id=\"ShareBtn\" disabled>Partager</button>\n                              </div>\n       \n                    </form>\n\n                    <div class=\"add-div\" v-show=\"success===false\">\n                      <p id=\"erreur\"> Echec du partage : {{message}} </p>\n                    </div>\n\n          </div>\n      </div>\n    </section>\n</template>\n\n<script>\n    export default {\n      name: 'PostAShare',\n      data() {\n        return {\n              success: \"\",\n              message :\"\", //message d'erreur\n              ShareText: {\n                type: String,\n                default: \"No comment\"},\n              file :\"\",\n              ShareFormHidden :{\n                type: Boolean,\n                default: true }\n        }\n      },\n      methods: {\n\n          displayForm(){\n            this.ShareFormHidden = false\n          },\n          displayGoTo(){\n            this.ShareFormHidden = true;\n            this.file = null\n          },\n\n          checkForm() {\n                    if (document.getElementById(\"ShareText\") || document.getElementById(\"Media\")\n                    ) {\n                    document.getElementById(\"ShareBtn\").disabled = false;\n                    }\n                    else document.getElementById(\"ShareBtn\").disabled = true;\n          },\n\n          uploadImage($event) {\n                    this.file = URL.createObjectURL($event.target.files[0]);\n          },\n\n          Share() {\n\n                    const Token = JSON.parse(sessionStorage.getItem(\"Token\"));\n                    const ShareToBePosted = document.getElementById(\"ShareToBePosted\");\n                    \n                    const Body = new FormData(ShareToBePosted);\n                    \n                    fetch(\"http://localhost:3000/api/shares\", {\n                              method: 'POST',\n                              headers: {\n                                  \"Accept\":\"*/*\",\n                                  // \"Content-Type\": \"multipart/form-data\", \n                                  \"Authorization\": \"Bearer \" + Token\n                              },\n                              body: Body,\n                              mode : \"cors\"})\n\n                    .then((response) => {\n\n                              if (response.status == 201) { \n                                        this.success= true;\n                                        this.message = \"Partage en ligne.\";\n                                        this.ShareFormHidden = true;\n                                        this.$router.push({ name: 'wall' });\n                                        this.$router.go(0);\n                                        // history.go(0);\n                              } else {\n                                        response.json ()\n                                        .then ((json) => {\n                                        this.success= false;\n                                        console.log(json);\n                                        this.message = json.error ||  json.message ;\n                                        return this.message\n                                        })\n                              }\n                    })\n                    .catch (() => {\n                              this.success= false;\n                              this.message = `Le serveur ne répond pas ! Veuillez réessayer ultérieurement`;\n                    })         \n          }               \n      }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n\n    #ShareAccess{\n      margin-top: 10px\n    }\n\n    #formImagePreview {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n\n    #formImagePreview img {\n      max-width: 100%;\n      max-height: 500px;\n    }\n\n</style>"]},"metadata":{},"sourceType":"module"}