{"ast":null,"code":"import { createElementVNode as _createElementVNode, vShow as _vShow, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-5c8a88ae\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"btn-div\",\n  id: \"ShareAccess\"\n};\nconst _hoisted_3 = {\n  class: \"formSection\",\n  id: \"ShareForm\"\n};\nconst _hoisted_4 = {\n  class: \"formDiv\"\n};\nconst _hoisted_5 = {\n  type: \"multipart/form-data\",\n  method: \"POST\",\n  name: \"form\",\n  id: \"CommentToBePosted\",\n  class: \"formulaire\"\n};\nconst _hoisted_6 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"CommentText\",\n  class: \"label\"\n}, \"Votre commentaire\", -1\n/* HOISTED */\n));\n\nconst _hoisted_8 = {\n  class: \"btn-div\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"section\", _hoisted_1, [_withDirectives(_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn\",\n    onClick: _cache[0] || (_cache[0] = $event => $options.displayForm()),\n    id: \"GoToShare\",\n    value: \"Partager\"\n  }, \" Un commentaire ? \")], 512\n  /* NEED_PATCH */\n  ), [[_vShow, $data.ShareFormHidden]]), _withDirectives(_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"form\", _hoisted_5, [_createCommentVNode(\"Le Comment\"), _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _createElementVNode(\"textarea\", {\n    class: \"bigtextarea textarea input\",\n    form: \"CommentToBePosted\",\n    type: \"textarea\",\n    onInput: _cache[1] || (_cache[1] = (...args) => $options.checkForm && $options.checkForm(...args)),\n    placeholder: \"...\",\n    autofocus: \"\",\n    id: \"CommentText\",\n    name: \"CommentText\"\n  }, null, 32\n  /* HYDRATE_EVENTS */\n  )]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn\",\n    onClick: _cache[2] || (_cache[2] = $event => $options.displayGoTo()),\n    id: \"CancelBtn\"\n  }, \"Annuler\"), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn\",\n    onClick: _cache[3] || (_cache[3] = $event => $options.Comment()),\n    id: \"CommentBtn\",\n    disabled: \"\"\n  }, \"Commenter\")])])])], 512\n  /* NEED_PATCH */\n  ), [[_vShow, !$data.ShareFormHidden]])]);\n}","map":{"version":3,"mappings":";;;;;AACaA,OAAK,EAAG;;;AACVA,OAAK,EAAC;AAAUC,IAAE,EAAC;;;AASnBD,OAAK,EAAG;AAAcC,IAAE,EAAC;;;AACrBD,OAAK,EAAG;;;AAEOE,MAAI,EAAC;AACLC,QAAM,EAAC;AACPC,MAAI,EAAC;AACLH,IAAE,EAAC;AACHD,OAAK,EAAC;;;AAGAA,OAAK,EAAC;;;gEACFK,oBAEiD,OAFjD,EAEiD;AADvCC,KAAG,EAAC,aACmC;AAAvCN,OAAK,EAAC;AAAiC,CAFjD,EAEwB,mBAFxB,EAEyC;AAAA;AAFzC;;;AAcLA,OAAK,EAAC;;;uBAnCrCO,oBA0CU,SA1CV,cA0CU,iBAzCRF,oBAQM,KARN,cAQM,CAPJA,oBAMS,QANT,EAMS;AANDH,QAAI,EAAC,QAMJ;AALDF,SAAK,EAAC,KAKL;AAJAQ,WAAK,sCAAEC,sBAAF,CAIL;AAHDR,MAAE,EAAC,WAGF;AAFDS,SAAK,EAAC;AAEL,GANT,EAIyB,oBAJzB,CAOI,CARN;;AAAA,eAA8CC,wBAyCtC,kBAhCRN,oBA+BM,KA/BN,cA+BM,CA9BFA,oBA6BM,KA7BN,cA6BM,CA5BIA,oBA2BO,MA3BP,cA2BO,CApBGO,iCAoBH,EAnBIP,oBAaK,KAbL,cAaK,CAZIQ,UAYJ,EATIR,oBAQwC,UARxC,EAQwC;AAR9BL,SAAK,EAAC,4BAQwB;AAP9Bc,QAAI,EAAC,mBAOyB;AAN9BZ,QAAI,EAAC,UAMyB;AAL7Ba,WAAK,yCAAEN,iDAAF,CAKwB;AAH9BO,eAAW,EAAE,KAGiB;AAF9BC,aAAS,EAAT,EAE8B;AAD9BhB,MAAE,EAAC,aAC2B;AAA9BG,QAAI,EAAC;AAAyB,GARxC;;AAAA,GASJ,CAbL,CAmBJ,EAJGC,oBAGM,KAHN,cAGM,CAFIA,oBAAwF,QAAxF,EAAwF;AAAhFH,QAAI,EAAC,QAA2E;AAAlEF,SAAK,EAAC,KAA4D;AAArDQ,WAAK,sCAAEC,sBAAF,CAAgD;AAA/BR,MAAE,EAAC;AAA4B,GAAxF,EAAwE,SAAxE,CAEJ,EADII,oBAAgG,QAAhG,EAAgG;AAAxFH,QAAI,EAAC,QAAmF;AAA1EF,SAAK,EAAC,KAAoE;AAA7DQ,WAAK,sCAAEC,kBAAF,CAAwD;AAA3CR,MAAE,EAAC,YAAwC;AAA3BiB,YAAQ,EAAR;AAA2B,GAAhG,EAA8E,WAA9E,CACJ,CAHN,CAIH,CA3BP,CA4BJ,CA7BN,CA8BE,CA/BN;;AAAA,gBAAmDP,wBAgC3C,CA1CV","names":["class","id","type","method","name","_createElementVNode","for","_createElementBlock","onClick","$options","value","$data","_createCommentVNode","_hoisted_7","form","onInput","placeholder","autofocus","disabled"],"sourceRoot":"","sources":["/Users/stefan/Library/Mobile Documents/com~apple~CloudDocs/08 WEB ET SITES/P7/frontend/src/components/PostAComment.vue"],"sourcesContent":["<template>\n    <section class = \"container\">\n      <div class=\"btn-div\" id=\"ShareAccess\" v-show=\"ShareFormHidden\">\n        <button type=\"button\" \n                class=\"btn\" \n                @click=\"displayForm()\" \n                id=\"GoToShare\" \n                value=\"Partager\">\n                Un commentaire ?\n        </button>\n      </div>\n      <div class = \"formSection\" id=\"ShareForm\" v-show=\"!ShareFormHidden\" >\n          <div class = \"formDiv\">\n                    <form     \n                              type=\"multipart/form-data\"\n                              method=\"POST\" \n                              name=\"form\" \n                              id=\"CommentToBePosted\"\n                              class=\"formulaire\">\n                              \n                              <!--Le Comment-->\n                               <div class=\"formLine\">\n                                        <label    \n                                                  for=\"CommentText\" \n                                                  class=\"label\">Votre commentaire</label>\n                                        <textarea class=\"bigtextarea textarea input\"\n                                                  form=\"CommentToBePosted\" \n                                                  type=\"textarea\"\n                                                  @input=\"checkForm\"\n                                                 \n                                                  placeholder= \"...\"\n                                                  autofocus\n                                                  id=\"CommentText\"\n                                                  name=\"CommentText\"></textarea>\n                              </div>\n                              \n                              <div class=\"btn-div\">\n                                        <button type=\"button\" class=\"btn\" @click=\"displayGoTo()\" id=\"CancelBtn\">Annuler</button>\n                                        <button type=\"button\" class=\"btn\" @click=\"Comment()\" id=\"CommentBtn\" disabled>Commenter</button>\n                              </div>\n                    </form>\n          </div>\n      </div>\n    </section>\n</template>\n\n<script>\nexport default {\n  name: 'PostAComment',\n  data() {\n    return {\n          success: \"\",\n          message :\"\", //message d'erreur\n          CommentText: String,\n          ShareFormHidden :{\n            type: Boolean,\n            default: true }\n            }\n    },\n  \n  methods: {\n          displayForm(){\n            this.ShareFormHidden = false\n          },\n          displayGoTo(){\n            this.ShareFormHidden = true\n          },\n          checkForm() {\n                    if (document.getElementById(\"CommentText\").textContent != null) {\n                      document.getElementById(\"CommentBtn\").disabled = false;\n                    } else { document.getElementById(\"CommentBtn\").disabled = true }\n          },\n          Comment(e) {\n\n                    e.preventDefault();\n\n                    const Token = JSON.parse(sessionStorage.getItem(\"Token\"));\n                    const CommentText = document.getElementById(\"CommentText\").value\n                    const shareShareId = new URL(window.location.href).hash.split(\"=\")[1]\n\n                    // const commentCommentId = \"\" ? document.getElementById(\"CommentId\") : document.getElementById(\"CommentId\").value\n\n                    const Comment = { \"CommentText\": CommentText,\n                                      \"shareShareId\": shareShareId,\n                                      // \"commentCommentId\": commentCommentId,\n                    }\n\n                    fetch(\"http://localhost:3000/api/comments\", {\n                              method: 'POST',\n                              body: JSON.stringify(Comment),\n                              headers: {\n                                  \"Content-Type\": \"application/json\",\n                                  \"Accept\":\"*/*\",\n                                  \"Authorization\": \"Bearer \" + Token,\n                              },\n                              mode : \"cors\"})\n\n                    .then((response) => {\n                              if (response.status == 201) { \n                                        this.success= true;\n                                        this.message = \"Commentaire en ligne.\";\n                                        this.ShareFormHidden = true;\n                                        this.$router.push({ name: 'wall' });\n                                        this.$router.go(0);\n\n                              } else {\n                                        response.json ()\n                                        .then ((json) => {\n                                        this.success= false;\n                                        console.log(json);\n                                        this.message = json.error ||  json.message ;\n                                        return this.message\n                                        })\n                              }\n                    })\n                    .catch (() => {\n                              this.success= false;\n                              this.message = `Le serveur ne répond pas ! Veuillez réessayer ultérieurement`;\n                    })         \n          }               \n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n#formImagePreview {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n#formImagePreview img {\n  max-width: 100%;\n  max-height: 500px;\n}\n\n</style>"]},"metadata":{},"sourceType":"module"}