{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"formSection\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"please\"\n}, [/*#__PURE__*/_createElementVNode(\"h2\", null, \" Ravis de vous revoir ! \")], -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = {\n  class: \"formDiv\"\n};\nconst _hoisted_5 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"UserEmail\",\n  class: \"label\"\n}, \"Email\", -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = {\n  class: \"formLine\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"UserPassword\",\n  class: \"label\"\n}, \"Mot de passe\", -1\n/* HOISTED */\n);\n\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"btn-div\"\n}, [/*#__PURE__*/_createCommentVNode(\" ICI  \"), /*#__PURE__*/_createCommentVNode(\" lancer un modal? mettre le texte en lowercase ? un bouton annuler ? \"), /*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"submit\",\n  class: \"btn\",\n  id: \"UserSignupBtn\",\n  value: \"S'authentifier\",\n  disabled: \"\"\n})], -1\n/* HOISTED */\n);\n\nconst _hoisted_10 = {\n  class: \"add-div\"\n};\nconst _hoisted_11 = {\n  id: \"erreur\"\n};\nconst _hoisted_12 = {\n  class: \"add-div\"\n};\nconst _hoisted_13 = {\n  id: \"erreur\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"section\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"form\", {\n    class: \"formulaire\",\n    method: \"POST\",\n    name: \"form\",\n    id: \"form\",\n    onSubmit: _cache[2] || (_cache[2] = (...args) => $options.LogIn && $options.LogIn(...args))\n  }, [_createCommentVNode(\"L'Email'\"), _createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _createElementVNode(\"input\", {\n    class: \"input\",\n    onInput: _cache[0] || (_cache[0] = (...args) => $options.checkForm && $options.checkForm(...args)),\n    type: \"email\",\n    id: \"UserEmail\",\n    name: \"UserEmail\",\n    required: \"\"\n  }, null, 32\n  /* HYDRATE_EVENTS */\n  )]), _createCommentVNode(\"Le Mot de passe \"), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _createElementVNode(\"input\", {\n    class: \"input\",\n    onInput: _cache[1] || (_cache[1] = (...args) => $options.checkForm && $options.checkForm(...args)),\n    type: \"text\",\n    id: \"UserPassword\",\n    name: \"UserPassword\",\n    required: \"required\",\n    maxlength: \"30\"\n  }, null, 32\n  /* HYDRATE_EVENTS */\n  )]), _hoisted_9], 32\n  /* HYDRATE_EVENTS */\n  ), _withDirectives(_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"p\", _hoisted_11, \" Echec de l'authentification : \" + _toDisplayString($data.message), 1\n  /* TEXT */\n  )], 512\n  /* NEED_PATCH */\n  ), [[_vShow, $data.success === false]]), _withDirectives(_createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"p\", _hoisted_13, \" Succès de l'authentification : \" + _toDisplayString($data.message), 1\n  /* TEXT */\n  )], 512\n  /* NEED_PATCH */\n  ), [[_vShow, $data.success === true]])])])]);\n}","map":{"version":3,"mappings":";;AACaA,OAAK,EAAG;;;AACVA,OAAK,EAAG;;;gCAETC,oBAEM,KAFN,EAEM;AAFDD,OAAK,EAAC;AAEL,CAFN,EAAmB,cACjBC,oBAAkC,IAAlC,EAAkC,IAAlC,EAAK,0BAAL,CADiB,CAAnB;;AAAA;;;AAIKD,OAAK,EAAG;;;AAQaA,OAAK,EAAC;;;gCACFC,oBAEqC,OAFrC,EAEqC;AAD3BC,KAAG,EAAC,WACuB;AAA3BF,OAAK,EAAC;AAAqB,CAFrC,EAEwB,OAFxB,EAE6B;AAAA;AAF7B;;;AAaLA,OAAK,EAAC;;;gCACDC,oBAE4C,OAF5C,EAE4C;AADlCC,KAAG,EAAC,cAC8B;AAAlCF,OAAK,EAAC;AAA4B,CAF5C,EAEwB,cAFxB,EAEoC;AAAA;AAFpC;;gCAaVC,oBAIM,KAJN,EAIM;AAJDD,OAAK,EAAC;AAIL,CAJN,EAAoB,cACVG,6BADU,eAEVA,4FAFU,eAGVF,oBAAqF,OAArF,EAAqF;AAA9EG,MAAI,EAAC,QAAyE;AAA/DJ,OAAK,EAAC,KAAyD;AAAnDK,IAAE,EAAC,eAAgD;AAAhCC,OAAK,EAAC,gBAA0B;AAATC,UAAQ,EAAR;AAAS,CAArF,CAHU,CAApB;;AAAA;;;AAOLP,OAAK,EAAC;;;AACNK,IAAE,EAAC;;;AAGHL,OAAK,EAAC;;;AACNK,IAAE,EAAC;;;uBAvDxBG,oBA4DU,SA5DV,cA4DU,CA3DRP,oBA0DO,KA1DP,cA0DO,CAxDHQ,UAwDG,EApDHR,oBAmDM,KAnDN,cAmDM,CAlDIA,oBAwCO,MAxCP,EAwCO;AAxCGD,SAAK,EAAC,YAwCT;AAvCGU,UAAM,EAAC,MAuCV;AAtCGC,QAAI,EAAC,MAsCR;AArCGN,MAAE,EAAC,MAqCN;AApCIO,YAAM,yCAAIC,yCAAJ;AAoCV,GAxCP,GAMUV,iCACCF,oBAWK,KAXL,cAWK,CAVIa,UAUJ,EAPIb,oBAMsB,OANtB,EAMsB;AANZD,SAAK,EAAC,OAMM;AALXe,WAAK,yCAAIF,iDAAJ,CAKM;AAJZT,QAAI,EAAC,OAIO;AAFZC,MAAE,EAAC,WAES;AADZM,QAAI,EAAC,WACO;AAAZK,YAAQ,EAAC;AAAG,GANtB;;AAAA,GAOJ,CAXL,GAaDb,yCACAF,oBAYM,KAZN,cAYM,CAXIgB,UAWJ,EARIhB,oBAOyB,OAPzB,EAOyB;AAPfD,SAAK,EAAC,OAOS;AANde,WAAK,yCAAIF,iDAAJ,CAMS;AALfT,QAAI,EAAC,MAKU;AAHfC,MAAE,EAAC,cAGY;AAFfM,QAAI,EAAC,cAEU;AADfK,YAAQ,EAAC,UACM;AAAfE,aAAS,EAAC;AAAK,GAPzB;;AAAA,GAQJ,CAZN,GAcAC,WAnCV;;AAAA,GAkDJ,kBARIlB,oBAEM,KAFN,eAEM,CADJA,oBAA8D,GAA9D,eAAe,oCAA+BmB,iBAAEC,aAAF,CAA9C,EAAuD;AAAA;AAAvD,GACI,CAFN;;AAAA,eAA6BA,kBAAO,QAQxC,kBAJIpB,oBAEM,KAFN,eAEM,CADJA,oBAA+D,GAA/D,eAAe,qCAAgCmB,iBAAEC,aAAF,CAA/C,EAAwD;AAAA;AAAxD,GACI,CAFN;;AAAA,eAA6BA,kBAAO,OAIxC,CAnDN,CAoDG,CA1DP,CA2DQ,CA5DV","names":["class","_createElementVNode","for","_createCommentVNode","type","id","value","disabled","_createElementBlock","_hoisted_3","method","name","onSubmit","$options","_hoisted_6","onInput","required","_hoisted_8","maxlength","_hoisted_9","_toDisplayString","$data"],"sourceRoot":"","sources":["/Users/stefan/Library/Mobile Documents/com~apple~CloudDocs/08 WEB ET SITES/P7/frontend/src/components/UserLoginComp.vue"],"sourcesContent":["<template>\n    <section class = \"container\">\n      <div class = \"formSection\">\n\n          <div class=\"please\">\n            <h2 > Ravis de vous revoir ! </h2>\n          </div>\n\n          <div class = \"formDiv\">\n                    <form     class=\"formulaire\"\n                              method=\"POST\" \n                              name=\"form\" \n                              id=\"form\" \n                              @submit = \"LogIn\"> \n                              \n                              <!--L'Email'-->\n                               <div class=\"formLine\">\n                                        <label    \n                                                  for=\"UserEmail\" \n                                                  class=\"label\">Email</label>\n                                        <input    class=\"input\"\n                                                  @input = \"checkForm\"    \n                                                  type=\"email\" \n                                                  \n                                                  id=\"UserEmail\"\n                                                  name=\"UserEmail\" \n                                                  required=\"\">\n                              </div>\n\n                              <!--Le Mot de passe -->\n                              <div class=\"formLine\">\n                                        <label    \n                                                  for=\"UserPassword\" \n                                                  class=\"label\">Mot de passe</label>\n                                        <input    class=\"input\"\n                                                  @input = \"checkForm\"    \n                                                  type=\"text\" \n                                                  \n                                                  id=\"UserPassword\" \n                                                  name=\"UserPassword\" \n                                                  required=\"required\" \n                                                  maxlength=\"30\">\n                              </div>\n                              \n                              <div class=\"btn-div\">\n                                        <!-- ICI  --> \n                                        <!-- lancer un modal? mettre le texte en lowercase ? un bouton annuler ? -->\n                                        <input type=\"submit\"  class=\"btn\" id=\"UserSignupBtn\" value=\"S'authentifier\" disabled>\n                              </div>\n                    </form>\n\n                    <div class=\"add-div\" v-show=\"success===false\">\n                      <p id=\"erreur\"> Echec de l'authentification : {{message}} </p>\n                    </div>\n\n                    <div class=\"add-div\" v-show=\"success===true\">\n                      <p id=\"erreur\"> Succès de l'authentification : {{message}} </p>\n                    </div>\n\n          </div>\n       </div>\n    </section>\n</template>\n\n<script>\nexport default {\n  name: 'UserLogin',\n  data() {\n    return {\n          success: \"\",\n          message :\"\", //message d'erreur ou pas\n    }\n  },\n  methods: {\n\n    checkForm() {\n      if (document.getElementById(\"UserEmail\").checkValidity()\n      && document.getElementById(\"UserPassword\").checkValidity()) {\n        document.getElementById(\"UserSignupBtn\").disabled = false;\n      }\n      else document.getElementById(\"UserSignupBtn\").disabled = true;\n    },\n\n    LogIn(e) {\n\n      event.preventDefault()\n\n          const UserEmail = document.getElementById(\"UserEmail\").value\n          const UserPassword = document.getElementById(\"UserPassword\").value\n          \n          const User = { \"UserEmail\": UserEmail,\n                         \"UserPassword\": UserPassword\n          }\n\n          fetch(\"http://localhost:3000/api/auth/login\", {\n                    method: 'POST',\n                    body: JSON.stringify(User),\n                    headers: {\"Content-Type\": \"application/json\" },\n                    mode :\"cors\"\n          })\n          .then((response) => {\n                    if (response.status == 200) { \n                              return response.json();\n                    } else {\n                              response.json ()\n                              .then ((json) => {\n                              this.success= false;\n                              this.message = json.error ||  json.message ;\n                              })\n                    }\n          })\n          .then((response) => {\n                    this.success= true;\n                    this.message = response.message;\n                    sessionStorage.setItem(\"UserId\", JSON.stringify(response.UserId));\n                    sessionStorage.setItem(\"Token\", JSON.stringify(response.token));\n                    sessionStorage.setItem(\"UserHabilitation\", JSON.stringify(response.UserHabilitation));\n                    this.$router.push({ name: 'wall' });\n          })\n\n          .catch (() => {\n                    this.success= false;\n                    this.message = `Le serveur ne répond pas ! Veuillez réessayer ultérieurement`;\n          })         \n    }               \n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>"]},"metadata":{},"sourceType":"module"}